<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –û—Ñ–µ—Ä—Ç–∞ | PARKETSENSE</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ERP Design System Tokens */
        :root {
            /* Colors */
            --color-primary: #000000;
            --color-on-primary: #FFFFFF;
            --color-bg: #F4F5F6;
            --color-surface: #FFFFFF;
            --color-border: #E0E0E0;
            --color-neutral-500: #A1A3A5;
            --color-neutral-700: #686869;
            --color-success: #91C479;
            --color-success-light: #C7F8D3;
            --color-warning-light: #FFE7C1;
            --color-danger: #FF4F4F;
            --color-info-indicator: #2ECC71;
            
            /* Typography */
            --font-family: "Inter", sans-serif;
            
            /* Spacing */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 24px;
            --space-6: 32px;
            
            /* Component tokens */
            --radius-btn: 8px;
            --size-btn: 40px;
            --space-btn-x: 20px;
            --shadow-btn: 0 1px 2px rgba(0,0,0,0.05);
            
            /* Elevation */
            --elevation-0: none;
            --elevation-1: 0 1px 2px rgba(0,0,0,0.05);
            --elevation-2: 0 4px 8px rgba(0,0,0,0.08);
            --elevation-3: 0 8px 16px rgba(0,0,0,0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--color-bg);
            color: var(--color-primary);
            line-height: 1.6;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--color-primary) 0%, #333333 100%);
            color: white;
            padding: var(--space-6);
            text-align: center;
        }

        .company-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
            margin-bottom: var(--space-5);
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: white;
            color: var(--color-primary);
            border-radius: var(--radius-btn);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 24px;
            box-shadow: var(--elevation-2);
        }

        .company-name {
            font-size: 2rem;
            font-weight: 700;
            letter-spacing: 2px;
        }

        .project-title {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
        }

        .project-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-6);
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: var(--space-6);
        }

        /* Variant Comparison Section - Sticky */
        .variants-overview {
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
            box-shadow: var(--elevation-2);
            position: sticky;
            top: var(--space-4);
            z-index: 100;
            border: 2px solid var(--color-success);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: var(--space-5);
            color: var(--color-primary);
        }

        .variants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-4);
        }

        .variant-summary {
            border: 2px solid var(--color-border);
            border-radius: var(--radius-btn);
            padding: var(--space-5);
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--color-surface);
        }

        .variant-summary:hover {
            border-color: var(--color-success);
            transform: translateY(-2px);
            box-shadow: var(--elevation-2);
        }

        .variant-summary.selected {
            border-color: var(--color-success);
            background: var(--color-success-light);
            box-shadow: var(--elevation-2);
        }

        .variant-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-2);
            color: var(--color-primary);
        }

        .variant-description {
            color: var(--color-neutral-700);
            margin-bottom: var(--space-4);
        }

        .variant-total-price {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-success);
        }

        .variant-total-label {
            font-size: 0.875rem;
            color: var(--color-neutral-500);
            margin-top: var(--space-1);
        }

        /* Detailed View Section */
        .variant-details {
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
            box-shadow: var(--elevation-1);
            display: none;
        }

        .variant-details.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Room Cards */
        .rooms-grid {
            display: grid;
            gap: var(--space-5);
        }

        .room-card {
            border: 1px solid var(--color-border);
            border-radius: var(--radius-btn);
            overflow: hidden;
            background: var(--color-surface);
            box-shadow: var(--elevation-1);
        }

        .room-header {
            background: var(--color-success-light);
            padding: var(--space-4);
            border-bottom: 1px solid var(--color-border);
        }

        .room-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--space-2);
        }

        .room-meta {
            display: flex;
            gap: var(--space-4);
            font-size: 0.875rem;
            color: var(--color-neutral-700);
        }

        .room-content {
            padding: var(--space-4);
        }

        /* Product Table */
        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: var(--space-4);
        }

        .products-table th {
            background: var(--color-bg);
            padding: var(--space-3);
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--color-neutral-700);
            border-bottom: 1px solid var(--color-border);
        }

        .products-table td {
            padding: var(--space-3);
            border-bottom: 1px solid var(--color-border);
            font-size: 0.875rem;
        }

        .products-table tr:hover {
            background: var(--color-bg);
        }

        .product-name {
            font-weight: 600;
            color: var(--color-primary);
        }

        .discount-badge {
            background: var(--color-warning-light);
            color: var(--color-neutral-700);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* Gallery Section */
        .gallery-section {
            margin-top: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid var(--color-border);
        }

        .gallery-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--space-3);
            color: var(--color-primary);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: var(--space-3);
        }

        .gallery-item {
            aspect-ratio: 1;
            background: var(--color-bg);
            border-radius: var(--radius-btn);
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }

        .gallery-item:hover {
            transform: scale(1.05);
            border-color: var(--color-success);
        }

        .gallery-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--color-neutral-500);
            font-size: 0.75rem;
            text-align: center;
        }

        /* Installation Options */
        .installation-section {
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
            box-shadow: var(--elevation-1);
        }

        .installation-grid {
            display: grid;
            gap: var(--space-4);
        }

        .installation-option {
            border: 2px solid var(--color-border);
            border-radius: var(--radius-btn);
            padding: var(--space-4);
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--color-surface);
        }

        .installation-option:hover {
            border-color: var(--color-success);
            background: var(--color-success-light);
        }

        .installation-option.selected {
            border-color: var(--color-success);
            background: var(--color-success-light);
            box-shadow: var(--elevation-1);
        }

        .installation-name {
            font-weight: 600;
            margin-bottom: var(--space-2);
            color: var(--color-primary);
        }

        .installation-description {
            color: var(--color-neutral-700);
            font-size: 0.875rem;
            margin-bottom: var(--space-3);
        }

        .installation-price {
            font-weight: 600;
            color: var(--color-success);
            font-size: 1.1rem;
        }

        /* Sidebar */
        .sidebar {
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            padding: var(--space-6);
            height: fit-content;
            position: sticky;
            top: var(--space-4);
            box-shadow: var(--elevation-2);
        }

        .sidebar-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: var(--space-5);
            text-align: center;
            color: var(--color-primary);
        }

        .price-summary {
            border: 1px solid var(--color-border);
            border-radius: var(--radius-btn);
            padding: var(--space-4);
            margin-bottom: var(--space-5);
            background: var(--color-bg);
        }

        .price-line {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-2) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .price-line:last-child {
            border-bottom: none;
            padding-top: var(--space-3);
            margin-top: var(--space-3);
            border-top: 2px solid var(--color-border);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .total-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-success);
        }

        /* Action Buttons */
        .btn {
            height: var(--size-btn);
            padding: 0 var(--space-btn-x);
            border: none;
            border-radius: var(--radius-btn);
            font-family: var(--font-family);
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            transition: all 0.2s ease;
            box-shadow: var(--shadow-btn);
            text-decoration: none;
            font-size: 0.875rem;
            margin-bottom: var(--space-3);
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--elevation-2);
        }

        .btn-primary {
            background-color: var(--color-primary);
            color: var(--color-on-primary);
        }

        .btn-success {
            background-color: var(--color-success);
            color: var(--color-on-primary);
        }

        .btn-danger {
            background-color: var(--color-danger);
            color: var(--color-on-primary);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }

        /* Notes Section */
        .notes-section {
            margin-top: var(--space-5);
        }

        .notes-textarea {
            width: 100%;
            min-height: 120px;
            padding: var(--space-4);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-btn);
            font-family: var(--font-family);
            resize: vertical;
            background: var(--color-surface);
        }

        .notes-textarea:focus {
            outline: none;
            border-color: var(--color-success);
            box-shadow: 0 0 0 3px rgba(145, 196, 121, 0.2);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: var(--space-4);
            }
            
            .sidebar {
                position: static;
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .variants-grid {
                grid-template-columns: 1fr;
            }
            
            .main-content {
                padding: var(--space-4);
            }
            
            .modal-content {
                width: 95%;
                margin: var(--space-4);
                max-height: 95vh;
            }
            
            .modal-header {
                padding: var(--space-4);
            }
            
            .modal-body {
                padding: var(--space-4);
            }
            
            .installation-gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .hero {
                padding: var(--space-4);
            }
            
            .project-title {
                font-size: 1.75rem;
            }
            
            .company-name {
                font-size: 1.5rem;
            }
            
            .service-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-2);
            }
            
            .installation-gallery-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Sticky comparison visual enhancement */
        .variants-overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--color-success), var(--color-primary));
            border-radius: var(--radius-btn) var(--radius-btn) 0 0;
        }

        .variants-overview.scrolled {
            box-shadow: var(--elevation-3);
            transform: scale(0.98);
        }

        /* AI Chat Assistant */
        .ai-chat-container {
            position: fixed;
            bottom: var(--space-4);
            right: var(--space-4);
            z-index: 1001;
        }

        .ai-chat-bubble {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--elevation-3);
            transition: all 0.3s ease;
            color: white;
            font-size: 24px;
            position: relative;
        }

        .ai-chat-bubble:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .ai-chat-bubble.has-notification {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .ai-chat-notification {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background: var(--color-danger);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .ai-chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 400px;
            height: 500px;
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            box-shadow: var(--elevation-3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 2px solid var(--color-success);
        }

        .ai-chat-window.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ai-chat-header {
            background: linear-gradient(135deg, var(--color-primary), var(--color-success));
            color: white;
            padding: var(--space-4);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-chat-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .ai-status {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: var(--color-success);
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .ai-chat-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 18px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .ai-chat-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .ai-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-4);
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .ai-message, .user-message {
            max-width: 80%;
            padding: var(--space-3);
            border-radius: var(--radius-btn);
            font-size: 0.875rem;
            line-height: 1.4;
        }

        .ai-message {
            background: var(--color-success-light);
            color: var(--color-primary);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .user-message {
            background: var(--color-primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .ai-typing {
            display: none;
            align-self: flex-start;
            padding: var(--space-3);
            background: var(--color-bg);
            border-radius: var(--radius-btn);
            border-bottom-left-radius: 4px;
        }

        .ai-typing.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--color-neutral-500);
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .ai-suggestions {
            padding: var(--space-3);
            border-top: 1px solid var(--color-border);
            background: var(--color-bg);
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            margin-bottom: var(--space-3);
        }

        .suggestion-chip {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: 6px var(--space-3);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--color-primary);
        }

        .suggestion-chip:hover {
            background: var(--color-success);
            color: white;
            border-color: var(--color-success);
        }

        .ai-chat-input-container {
            display: flex;
            gap: var(--space-2);
            align-items: center;
        }

        .ai-chat-input {
            flex: 1;
            border: 1px solid var(--color-border);
            border-radius: 20px;
            padding: var(--space-2) var(--space-3);
            font-size: 0.875rem;
            background: var(--color-surface);
        }

        .ai-chat-input:focus {
            outline: none;
            border-color: var(--color-success);
            box-shadow: 0 0 0 2px rgba(145, 196, 121, 0.2);
        }

        .ai-chat-send {
            background: var(--color-success);
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .ai-chat-send:hover {
            background: var(--color-primary);
            transform: scale(1.05);
        }

        .ai-chat-send:disabled {
            background: var(--color-neutral-500);
            cursor: not-allowed;
            transform: none;
        }

        /* Mobile responsive for AI chat */
        @media (max-width: 768px) {
            .ai-chat-window {
                width: 350px;
                height: 450px;
            }
        }

        @media (max-width: 480px) {
            .ai-chat-container {
                bottom: var(--space-3);
                right: var(--space-3);
            }
            
            .ai-chat-window {
                width: calc(100vw - 24px);
                height: 400px;
                right: -var(--space-3);
            }
            
            .ai-chat-bubble {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            max-width: 900px;
            max-height: 90vh;
            width: 90%;
            overflow-y: auto;
            box-shadow: var(--elevation-3);
            position: relative;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-50px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .modal-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-success-light);
            border-radius: var(--radius-btn) var(--radius-btn) 0 0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-primary);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-neutral-700);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: var(--color-danger);
            color: white;
        }

        .modal-body {
            padding: var(--space-6);
        }

        .installation-details-grid {
            display: grid;
            gap: var(--space-5);
        }

        .service-category {
            background: var(--color-bg);
            border-radius: var(--radius-btn);
            padding: var(--space-5);
            border-left: 4px solid var(--color-success);
        }

        .service-category h3 {
            color: var(--color-primary);
            margin-bottom: var(--space-3);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .service-items {
            display: grid;
            gap: var(--space-3);
        }

        .service-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3);
            background: var(--color-surface);
            border-radius: var(--radius-btn);
            border: 1px solid var(--color-border);
        }

        .service-item-info {
            flex: 1;
        }

        .service-item-name {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--space-1);
        }

        .service-item-description {
            font-size: 0.875rem;
            color: var(--color-neutral-700);
        }

        .service-item-price {
            font-weight: 600;
            color: var(--color-success);
            font-size: 1.1rem;
        }

        .installation-total {
            background: var(--color-success-light);
            border-radius: var(--radius-btn);
            padding: var(--space-5);
            margin-top: var(--space-5);
            text-align: center;
        }

        .installation-total-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--space-2);
        }

        .installation-total-price {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-success);
        }

        .installation-gallery {
            margin-top: var(--space-5);
            padding-top: var(--space-5);
            border-top: 1px solid var(--color-border);
        }

        .installation-gallery h3 {
            color: var(--color-primary);
            margin-bottom: var(--space-4);
            font-size: 1.25rem;
            font-weight: 600;
        }

        .installation-gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: var(--space-3);
        }

        .installation-gallery-item {
            aspect-ratio: 4/3;
            background: var(--color-bg);
            border-radius: var(--radius-btn);
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }

        .installation-gallery-item:hover {
            transform: scale(1.05);
            border-color: var(--color-success);
        }

        .installation-gallery-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--color-neutral-500);
            font-size: 0.75rem;
            text-align: center;
            padding: var(--space-2);
        }

        .details-button {
            background: var(--color-primary);
            color: var(--color-on-primary);
            border: none;
            padding: 6px var(--space-3);
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: var(--space-2);
        }

        .details-button:hover {
            background: var(--color-success);
            transform: translateY(-1px);
        }

        /* Update animations */
        .price-updating {
            animation: priceUpdate 0.6s ease;
        }

        @keyframes priceUpdate {
            0% { background: var(--color-success-light); }
            50% { background: var(--color-warning-light); }
            100% { background: transparent; }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <div class="hero">
        <div class="company-logo">
            <div class="logo-icon">PS</div>
            <div class="company-name">PARKETSENSE</div>
        </div>

    <!-- AI Chat Assistant -->
    <div class="ai-chat-container">
        <div class="ai-chat-bubble" id="aiChatBubble" onclick="toggleAIChat()">
            ü§ñ
            <div class="ai-chat-notification" id="aiNotification" style="display: none;">1</div>
        </div>
        
        <div class="ai-chat-window" id="aiChatWindow">
            <div class="ai-chat-header">
                <div class="ai-chat-title">
                    ü§ñ PARKETSENSE AI –ê—Å–∏—Å—Ç–µ–Ω—Ç
                    <span class="ai-status"></span>
                </div>
                <button class="ai-chat-close" onclick="closeAIChat()">√ó</button>
            </div>
            
            <div class="ai-chat-messages" id="aiChatMessages">
                <div class="ai-message">
                    –ó–¥—Ä–∞–≤–µ–π—Ç–µ! –ê–∑ —Å—ä–º –≤–∞—à–∏—è—Ç AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –∑–∞ —Ç–∞–∑–∏ –æ—Ñ–µ—Ä—Ç–∞. –ú–æ–≥–∞ –¥–∞ –æ—Ç–≥–æ–≤–æ—Ä—è –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞:
                    <br><br>
                    üèóÔ∏è –ü—Ä–æ–¥—É–∫—Ç–∏—Ç–µ –∏ —Ç–µ—Ö–Ω–∏—Ç–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏<br>
                    üí∞ –¶–µ–Ω–∏—Ç–µ –∏ –∫–∞–ª–∫—É–ª–∞—Ü–∏–∏—Ç–µ<br>
                    üîß –ú–æ–Ω—Ç–∞–∂–Ω–∏—Ç–µ —É—Å–ª—É–≥–∏<br>
                    üìÖ –í—Ä–µ–º–µ—Ç–æ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ<br>
                    üìã –ì–∞—Ä–∞–Ω—Ü–∏–æ–Ω–Ω–∏—Ç–µ —É—Å–ª–æ–≤–∏—è
                    <br><br>
                    –ö–∞–∫ –º–æ–≥–∞ –¥–∞ –≤–∏ –ø–æ–º–æ–≥–Ω–∞?
                </div>
            </div>
            
            <div class="ai-typing" id="aiTyping">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            
            <div class="ai-suggestions">
                <div class="suggestion-chips" id="aiSuggestions">
                    <div class="suggestion-chip" onclick="askAI('–ö–∞–∫–≤–∞ –µ —Ä–∞–∑–ª–∏–∫–∞—Ç–∞ –º–µ–∂–¥—É –¥–≤–∞—Ç–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞?')">
                        –†–∞–∑–ª–∏–∫–∞ –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∏—Ç–µ
                    </div>
                    <div class="suggestion-chip" onclick="askAI('–ö–æ–ª–∫–æ –≤—Ä–µ–º–µ –æ—Ç–Ω–µ–º–∞ –º–æ–Ω—Ç–∞–∂—ä—Ç?')">
                        –í—Ä–µ–º–µ –∑–∞ –º–æ–Ω—Ç–∞–∂
                    </div>
                    <div class="suggestion-chip" onclick="askAI('–ö–∞–∫–≤–∞ –µ –≥–∞—Ä–∞–Ω—Ü–∏—è—Ç–∞?')">
                        –ì–∞—Ä–∞–Ω—Ü–∏–æ–Ω–Ω–∏ —É—Å–ª–æ–≤–∏—è
                    </div>
                </div>
                
                <div class="ai-chat-input-container">
                    <input 
                        type="text" 
                        class="ai-chat-input" 
                        id="aiChatInput" 
                        placeholder="–ó–∞–¥–∞–π—Ç–µ –≤—ä–ø—Ä–æ—Å..."
                        onkeypress="handleAIInputKeypress(event)"
                    >
                    <button class="ai-chat-send" id="aiChatSend" onclick="sendAIMessage()">
                        ‚û§
                    </button>
                </div>
            </div>
        </div>
    </div>
        
        <h1 class="project-title" id="projectTitle">–•–æ—Ç–µ–ª –ë—É—Ä–≥–∞—Å</h1>
        <p class="project-subtitle">–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –æ—Ñ–µ—Ä—Ç–∞ –∑–∞ –ø–æ–¥–æ–≤–∏ –ø–æ–∫—Ä–∏—Ç–∏—è</p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="content-area">
            <!-- Variants Overview -->
            <div class="variants-overview">
                <h2 class="section-title">üéØ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∏</h2>
                <div class="variants-grid">
                    <div class="variant-summary selected" onclick="selectVariant(1)" data-variant="1">
                        <div class="variant-name">–í–∞—Ä–∏–∞–Ω—Ç 1: –†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç</div>
                        <div class="variant-description">–ï–ª–µ–≥–∞–Ω—Ç–µ–Ω –ø–∞—Ä–∫–µ—Ç —Å —Ä–∏–±–µ–Ω–∞ –∫–æ—Å—Ç —Å—Ö–µ–º–∞, –ø–æ–¥—Ö–æ–¥—è—â –∑–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª–Ω–∏ –∑–æ–Ω–∏</div>
                        <div class="variant-total-price" id="variant1-total">52,800 –ª–≤</div>
                        <div class="variant-total-label" id="variant1-label">—Å –î–î–° –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂</div>
                    </div>
                    
                    <div class="variant-summary" onclick="selectVariant(2)" data-variant="2">
                        <div class="variant-name">–í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∞–≤ –ø–∞—Ä–∫–µ—Ç</div>
                        <div class="variant-description">–ö–ª–∞—Å–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤ –ø–∞—Ä–∫–µ—Ç —Å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–∞ –∫—Ä–∞—Å–æ—Ç–∞ –Ω–∞ –¥—ä—Ä–≤–æ—Ç–æ</div>
                        <div class="variant-total-price" id="variant2-total">48,600 –ª–≤</div>
                        <div class="variant-total-label" id="variant2-label">—Å –î–î–° –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂</div>
                    </div>
                </div>
            </div>

            <!-- Variant 1 Details -->
            <div class="variant-details active" id="variant1-details">
                <h2 class="section-title">üìã –î–µ—Ç–∞–π–ª–∏ - –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç</h2>
                
                <div class="rooms-grid">
                    <!-- Room 1: –î–Ω–µ–≤–Ω–∞ -->
                    <div class="room-card">
                        <div class="room-header">
                            <div class="room-name">üè† –î–Ω–µ–≤–Ω–∞</div>
                            <div class="room-meta">
                                <span>üìê 85 –º¬≤</span>
                                <span>üí∞ 5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span>
                                <span>üìä 10% —Ñ–∏—Ä–∞</span>
                            </div>
                        </div>
                        
                        <div class="room-content">
                            <table class="products-table">
                                <thead>
                                    <tr>
                                        <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                        <th>–ï–¥. —Ü–µ–Ω–∞</th>
                                        <th>–û—Ç—Å—Ç—ä–ø–∫–∞</th>
                                        <th>–û–±—â–∞ —Å—É–º–∞</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="product-name">–ü–∞—Ä–∫–µ—Ç –î—ä–± –†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç</td>
                                        <td>94 –º¬≤ (85+10% —Ñ–∏—Ä–∞)</td>
                                        <td>85 –ª–≤/–º¬≤</td>
                                        <td><span class="discount-badge">5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>7,581 –ª–≤</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="product-name">–ü–µ—Ä–≤–∞–∑–∏ –¥—ä–±</td>
                                        <td>35 –ª–º</td>
                                        <td>15 –ª–≤/–ª–º</td>
                                        <td><span class="discount-badge">5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>499 –ª–≤</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="product-name">–õ–µ–ø–∏–ª–æ Bona R850</td>
                                        <td>8 –∫–≥</td>
                                        <td>25 –ª–≤/–∫–≥</td>
                                        <td>-</td>
                                        <td><strong>200 –ª–≤</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div class="gallery-section">
                                <div class="gallery-title">üì∏ –ì–∞–ª–µ—Ä–∏—è - –î–Ω–µ–≤–Ω–∞</div>
                                <div class="gallery-grid">
                                    <div class="gallery-item" onclick="openGallery('room1', 1)">
                                        <div class="gallery-placeholder">–í–¥—ä—Ö–Ω–æ–≤–µ–Ω–∏–µ<br>–¥–Ω–µ–≤–Ω–∞</div>
                                    </div>
                                    <div class="gallery-item" onclick="openGallery('room1', 2)">
                                        <div class="gallery-placeholder">–ü–∞—Ä–∫–µ—Ç<br>–æ–±—Ä–∞–∑—Ü–∏</div>
                                    </div>
                                    <div class="gallery-item" onclick="openGallery('room1', 3)">
                                        <div class="gallery-placeholder">–¶–≤–µ—Ç–æ–≤–∞<br>–≥–∞–º–∞</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Room 2: –°–ø–∞–ª–Ω—è -->
                    <div class="room-card">
                        <div class="room-header">
                            <div class="room-name">üõèÔ∏è –°–ø–∞–ª–Ω—è</div>
                            <div class="room-meta">
                                <span>üìê 35 –º¬≤</span>
                                <span>üí∞ 5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span>
                                <span>üìä 10% —Ñ–∏—Ä–∞</span>
                            </div>
                        </div>
                        
                        <div class="room-content">
                            <table class="products-table">
                                <thead>
                                    <tr>
                                        <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                        <th>–ï–¥. —Ü–µ–Ω–∞</th>
                                        <th>–û—Ç—Å—Ç—ä–ø–∫–∞</th>
                                        <th>–û–±—â–∞ —Å—É–º–∞</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="product-name">–ü–∞—Ä–∫–µ—Ç –î—ä–± –†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç</td>
                                        <td>39 –º¬≤ (35+10% —Ñ–∏—Ä–∞)</td>
                                        <td>85 –ª–≤/–º¬≤</td>
                                        <td><span class="discount-badge">5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>3,147 –ª–≤</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="product-name">–ü–µ—Ä–≤–∞–∑–∏ –¥—ä–±</td>
                                        <td>24 –ª–º</td>
                                        <td>15 –ª–≤/–ª–º</td>
                                        <td><span class="discount-badge">5% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>342 –ª–≤</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                            
                            <div class="gallery-section">
                                <div class="gallery-title">üì∏ –ì–∞–ª–µ—Ä–∏—è - –°–ø–∞–ª–Ω—è</div>
                                <div class="gallery-grid">
                                    <div class="gallery-item" onclick="openGallery('room2', 1)">
                                        <div class="gallery-placeholder">–°–ø–∞–ª–Ω—è<br>–¥–∏–∑–∞–π–Ω</div>
                                    </div>
                                    <div class="gallery-item" onclick="openGallery('room2', 2)">
                                        <div class="gallery-placeholder">–ò–Ω—Ç–µ—Ä–∏–æ—Ä<br>–∏–¥–µ–∏</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Variant 2 Details -->
            <div class="variant-details" id="variant2-details">
                <h2 class="section-title">üìã –î–µ—Ç–∞–π–ª–∏ - –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∞–≤ –ø–∞—Ä–∫–µ—Ç</h2>
                
                <div class="rooms-grid">
                    <!-- Similar structure for Variant 2 -->
                    <div class="room-card">
                        <div class="room-header">
                            <div class="room-name">üè† –î–Ω–µ–≤–Ω–∞</div>
                            <div class="room-meta">
                                <span>üìê 85 –º¬≤</span>
                                <span>üí∞ 8% –æ—Ç—Å—Ç—ä–ø–∫–∞</span>
                                <span>üìä 10% —Ñ–∏—Ä–∞</span>
                            </div>
                        </div>
                        
                        <div class="room-content">
                            <table class="products-table">
                                <thead>
                                    <tr>
                                        <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                                        <th>–ï–¥. —Ü–µ–Ω–∞</th>
                                        <th>–û—Ç—Å—Ç—ä–ø–∫–∞</th>
                                        <th>–û–±—â–∞ —Å—É–º–∞</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="product-name">–ü–∞—Ä–∫–µ—Ç –î—ä–± –ù–∞—Ç—É—Ä–∞–ª</td>
                                        <td>94 –º¬≤ (85+10% —Ñ–∏—Ä–∞)</td>
                                        <td>75 –ª–≤/–º¬≤</td>
                                        <td><span class="discount-badge">8% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>6,486 –ª–≤</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="product-name">–ü–µ—Ä–≤–∞–∑–∏ –¥—ä–±</td>
                                        <td>35 –ª–º</td>
                                        <td>15 –ª–≤/–ª–º</td>
                                        <td><span class="discount-badge">8% –æ—Ç—Å—Ç—ä–ø–∫–∞</span></td>
                                        <td><strong>483 –ª–≤</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Installation Options -->
            <div class="installation-section">
                <h2 class="section-title">üîß –û–ø—Ü–∏–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂</h2>
                <div class="installation-grid" id="installation-options">
                    <!-- Dynamic content based on selected variant -->
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <h3 class="sidebar-title">üí∞ –û–±–æ–±—â–µ–Ω–∏–µ –Ω–∞ –æ—Ñ–µ—Ä—Ç–∞—Ç–∞</h3>
            
            <div class="price-summary">
                <div class="price-line">
                    <span>–ú–∞—Ç–µ—Ä–∏–∞–ª–∏:</span>
                    <span id="materials-price">34,000 –ª–≤</span>
                </div>
                <div class="price-line">
                    <span>–ú–æ–Ω—Ç–∞–∂:</span>
                    <span id="installation-price">10,000 –ª–≤</span>
                </div>
                <div class="price-line">
                    <span>–ü–æ–¥—Å—É–º–∞:</span>
                    <span id="subtotal-price">44,000 –ª–≤</span>
                </div>
                <div class="price-line">
                    <span>–î–î–° (20%):</span>
                    <span id="vat-price">8,800 –ª–≤</span>
                </div>
                <div class="price-line">
                    <span>–û–±—â–∞ —Å—É–º–∞:</span>
                    <span class="total-price" id="total-price">52,800 –ª–≤</span>
                </div>
            </div>

            <button class="btn btn-success" onclick="acceptOffer()">
                ‚úÖ –ü—Ä–∏–µ–º–∞–º –æ—Ñ–µ—Ä—Ç–∞—Ç–∞
            </button>
            
            <button class="btn btn-outline" onclick="requestChanges()">
                üìù –ò—Å–∫–∞–º –ø—Ä–æ–º–µ–Ω–∏
            </button>
            
            <button class="btn btn-primary" onclick="downloadPDF()">
                üìÑ –ò–∑—Ç–µ–≥–ª–∏ PDF
            </button>
            
            <button class="btn btn-outline" onclick="scheduleMeeting()">
                üìÖ –ù–∞—Å—Ä–æ—á–∏ —Å—Ä–µ—â–∞
            </button>

            <div class="notes-section">
                <label for="client-notes" style="display: block; margin-bottom: var(--space-2); font-weight: 600;">üìù –í–∞—à–∏—Ç–µ –∑–∞–±–µ–ª–µ–∂–∫–∏:</label>
                <textarea 
                    id="client-notes"
                    class="notes-textarea" 
                    placeholder="–°–ø–æ–¥–µ–ª–µ—Ç–µ –≤–∞—à–∏—Ç–µ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏, –≤—ä–ø—Ä–æ—Å–∏ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª–Ω–∏ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è..."
                    onchange="updateClientNotes(this.value)">
                </textarea>
            </div>
        </div>
    </div>

    <!-- Installation Details Modal -->
    <div class="modal-overlay" id="installationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">üîß –î–µ—Ç–∞–π–ª–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂</h2>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <div class="installation-details-grid" id="installationDetailsContent">
                    <!-- Dynamic content will be loaded here -->
                </div>
                
                <div class="installation-total">
                    <div class="installation-total-title">–û–±—â–∞ —Ü–µ–Ω–∞ –∑–∞ –º–æ–Ω—Ç–∞–∂–∞</div>
                    <div class="installation-total-price" id="modalTotalPrice">12,000 –ª–≤</div>
                </div>
                
                <div class="installation-gallery">
                    <h3>üì∏ –ü—Ä–∏–º–µ—Ä–∏ –æ—Ç –Ω–∞—à–∏ –º–æ–Ω—Ç–∞–∂–∏</h3>
                    <div class="installation-gallery-grid">
                        <div class="installation-gallery-item" onclick="openInstallationGallery(1)">
                            <div class="installation-gallery-placeholder">
                                üèóÔ∏è<br>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞<br>–Ω–∞ –æ—Å–Ω–æ–≤–∞
                            </div>
                        </div>
                        <div class="installation-gallery-item" onclick="openInstallationGallery(2)">
                            <div class="installation-gallery-placeholder">
                                üî®<br>–ú–æ–Ω—Ç–∞–∂<br>–≤ –ø—Ä–æ—Ü–µ—Å
                            </div>
                        </div>
                        <div class="installation-gallery-item" onclick="openInstallationGallery(3)">
                            <div class="installation-gallery-placeholder">
                                ‚ú®<br>–§–∏–Ω–∞–ª–µ–Ω<br>—Ä–µ–∑—É–ª—Ç–∞—Ç
                            </div>
                        </div>
                        <div class="installation-gallery-item" onclick="openInstallationGallery(4)">
                            <div class="installation-gallery-placeholder">
                                üßπ<br>–ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ<br>–∏ –ø—Ä–µ–¥–∞–≤–∞–Ω–µ
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Project data structure
        const projectData = {
            variants: {
                1: {
                    name: "–†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç",
                    materialsCost: 34000,
                    installationOptions: {
                        basic: { name: "–ë–µ–∑ –º–æ–Ω—Ç–∞–∂", price: 0 },
                        standard: { name: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂", price: 12000 },
                        premium: { name: "–ü—Ä–µ–º–∏—É–º –º–æ–Ω—Ç–∞–∂", price: 18000 }
                    }
                },
                2: {
                    name: "–ü—Ä–∞–≤ –ø–∞—Ä–∫–µ—Ç", 
                    materialsCost: 28000,
                    installationOptions: {
                        basic: { name: "–ë–µ–∑ –º–æ–Ω—Ç–∞–∂", price: 0 },
                        standard: { name: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂", price: 9500 },
                        premium: { name: "–ü—Ä–µ–º–∏—É–º –º–æ–Ω—Ç–∞–∂", price: 14500 }
                    }
                }
            }
        };

        let currentVariant = 1;
        let currentInstallation = 'standard';

        function selectVariant(variantId) {
            // Update UI
            document.querySelectorAll('.variant-summary').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-variant="${variantId}"]`).classList.add('selected');

            // Show/hide details
            document.querySelectorAll('.variant-details').forEach(details => {
                details.classList.remove('active');
            });
            document.getElementById(`variant${variantId}-details`).classList.add('active');

            // Update current variant
            currentVariant = variantId;
            
            // Update installation options
            updateInstallationOptions();
            
            // Update pricing
            updatePricing();
        }

        function updateInstallationOptions() {
            const variant = projectData.variants[currentVariant];
            const container = document.getElementById('installation-options');
            
            container.innerHTML = '';
            
            Object.entries(variant.installationOptions).forEach(([key, option]) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = `installation-option ${key === currentInstallation ? 'selected' : ''}`;
                optionDiv.onclick = () => selectInstallation(key);
                
                const detailsButton = key !== 'basic' ? 
                    `<button class="details-button" onclick="event.stopPropagation(); showInstallationDetails('${key}')">
                        üìã –í–∏–∂ –¥–µ—Ç–∞–π–ª–∏
                    </button>` : '';
                
                optionDiv.innerHTML = `
                    <div class="installation-name">${option.name}</div>
                    <div class="installation-description">
                        ${key === 'basic' ? '–°–∞–º–æ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∏—Ç–µ. –ú–æ–Ω—Ç–∞–∂—ä—Ç —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞ –æ—Ç –≤–∞—à –µ–∫–∏–ø.' : 
                          key === 'standard' ? '–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –º–æ–Ω—Ç–∞–∂ –æ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–∞–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∏ —Å 2 –≥–æ–¥–∏–Ω–∏ –≥–∞—Ä–∞–Ω—Ü–∏—è.' :
                          '–í–∫–ª—é—á–≤–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ç–∞, –º–æ–Ω—Ç–∞–∂, —Ñ–∏–Ω–∏—à–Ω–∏ —Ä–∞–±–æ—Ç–∏ –∏ 3 –≥–æ–¥–∏–Ω–∏ –≥–∞—Ä–∞–Ω—Ü–∏—è.'}
                    </div>
                    <div class="installation-price">
                        ${option.price === 0 ? '–í–∫–ª—é—á–µ–Ω–æ' : `+ ${option.price.toLocaleString('bg-BG')} –ª–≤`}
                    </div>
                    ${detailsButton}
                `;
                
                container.appendChild(optionDiv);
            });
        }

        function selectInstallation(installationType) {
            currentInstallation = installationType;
            
            // Update UI
            document.querySelectorAll('.installation-option').forEach(option => {
                option.classList.remove('selected');
            });
            event.target.closest('.installation-option').classList.add('selected');
            
            // Update pricing
            updatePricing();
            
            // Update variant labels
            updateVariantLabels();
        }

        function updateVariantLabels() {
            const installationNames = {
                'basic': '–±–µ–∑ –º–æ–Ω—Ç–∞–∂',
                'standard': '—Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂', 
                'premium': '–ø—Ä–µ–º–∏—É–º –º–æ–Ω—Ç–∞–∂'
            };
            
            // Update all variant labels
            Object.keys(projectData.variants).forEach(variantId => {
                const labelElement = document.getElementById(`variant${variantId}-label`);
                const installationText = installationNames[currentInstallation];
                labelElement.textContent = `—Å –î–î–° –∏ ${installationText}`;
                
                // Add update animation
                labelElement.classList.add('price-updating');
                setTimeout(() => labelElement.classList.remove('price-updating'), 600);
            });
        }

        function updatePricing() {
            const variant = projectData.variants[currentVariant];
            const materialsPrice = variant.materialsCost;
            const installationPrice = variant.installationOptions[currentInstallation].price;
            const subtotal = materialsPrice + installationPrice;
            const vat = subtotal * 0.2;
            const total = subtotal + vat;

            // Update current sidebar pricing with animation
            const updates = [
                { id: 'materials-price', value: materialsPrice },
                { id: 'installation-price', value: installationPrice },
                { id: 'subtotal-price', value: subtotal },
                { id: 'vat-price', value: vat },
                { id: 'total-price', value: total }
            ];

            updates.forEach(({ id, value }) => {
                const element = document.getElementById(id);
                element.classList.add('price-updating');
                element.textContent = `${value.toLocaleString('bg-BG')} –ª–≤`;
                setTimeout(() => element.classList.remove('price-updating'), 600);
            });

            // Update ALL variant summary totals (not just current)
            Object.keys(projectData.variants).forEach(variantId => {
                const variantData = projectData.variants[variantId];
                const variantMaterials = variantData.materialsCost;
                const variantInstallation = variantData.installationOptions[currentInstallation].price;
                const variantSubtotal = variantMaterials + variantInstallation;
                const variantVat = variantSubtotal * 0.2;
                const variantTotal = variantSubtotal + variantVat;
                
                const totalElement = document.getElementById(`variant${variantId}-total`);
                totalElement.classList.add('price-updating');
                totalElement.textContent = `${variantTotal.toLocaleString('bg-BG')} –ª–≤`;
                setTimeout(() => totalElement.classList.remove('price-updating'), 600);
            });
        }

        // Installation details data
        const installationDetails = {
            standard: {
                title: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –º–æ–Ω—Ç–∞–∂",
                description: "–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –º–æ–Ω—Ç–∞–∂ —Å 2 –≥–æ–¥–∏–Ω–∏ –≥–∞—Ä–∞–Ω—Ü–∏—è",
                services: [
                    {
                        category: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
                        items: [
                            { name: "–û–≥–ª–µ–¥ –∏ –∑–∞–º–µ—Ä–≤–∞–Ω–µ", description: "–î–µ—Ç–∞–π–ª–Ω–æ –∑–∞–º–µ—Ä–≤–∞–Ω–µ –∏ –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ç–∞", price: "150 –ª–≤" },
                            { name: "–ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ç–∞", description: "–ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ä–∏ –ø–æ–∫—Ä–∏—Ç–∏—è –∏ –º—Ä—ä—Å–æ—Ç–∏—è", price: "3 –ª–≤/–º¬≤" },
                            { name: "–ù–∏–≤–µ–ª–∏—Ä–∞–Ω–µ", description: "–ò–∑—Ä–∞–≤–Ω—è–≤–∞–Ω–µ –Ω–∞ –Ω–µ—Ä–∞–≤–Ω–æ—Å—Ç–∏ –¥–æ 3–º–º", price: "8 –ª–≤/–º¬≤" }
                        ]
                    },
                    {
                        category: "–ú–æ–Ω—Ç–∞–∂",
                        items: [
                            { name: "–ü–æ–ª–∞–≥–∞–Ω–µ –Ω–∞ –ø–∞—Ä–∫–µ—Ç–∞", description: "–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –º–æ–Ω—Ç–∞–∂ —Å–ø–æ—Ä–µ–¥ —Å—Ö–µ–º–∞—Ç–∞", price: "12 –ª–≤/–º¬≤" },
                            { name: "–†—è–∑–∞–Ω–µ –∏ –ø–æ–¥–≥–æ–Ω–∫–∞", description: "–ü—Ä–µ—Ü–∏–∑–Ω–æ —Ä—è–∑–∞–Ω–µ –∏ –ø–æ–¥–≥–æ–Ω–∫–∞ –æ–∫–æ–ª–æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è", price: "–≤–∫–ª—é—á–µ–Ω–æ" },
                            { name: "–ú–æ–Ω—Ç–∞–∂ –Ω–∞ –ø–µ—Ä–≤–∞–∑–∏", description: "–ü–æ—Å—Ç–∞–≤—è–Ω–µ –Ω–∞ –¥—ä—Ä–≤–µ–Ω–∏ –ø–µ—Ä–≤–∞–∑–∏", price: "8 –ª–≤/–ª–º" }
                        ]
                    },
                    {
                        category: "–§–∏–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–µ",
                        items: [
                            { name: "–ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ", description: "–û—Å–Ω–æ–≤–Ω–æ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ —Ä–∞–±–æ—Ç–Ω–æ—Ç–æ –º—è—Å—Ç–æ", price: "2 –ª–≤/–º¬≤" },
                            { name: "–ö–æ–Ω—Ç—Ä–æ–ª –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ", description: "–§–∏–Ω–∞–ª–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–µ–¥–∞–≤–∞–Ω–µ", price: "–≤–∫–ª—é—á–µ–Ω–æ" }
                        ]
                    }
                ]
            },
            premium: {
                title: "–ü—Ä–µ–º–∏—É–º –º–æ–Ω—Ç–∞–∂",
                description: "–ü—ä–ª–µ–Ω –ø–∞–∫–µ—Ç —Å 3 –≥–æ–¥–∏–Ω–∏ –≥–∞—Ä–∞–Ω—Ü–∏—è",
                services: [
                    {
                        category: "–†–∞–∑—à–∏—Ä–µ–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
                        items: [
                            { name: "3D —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ", description: "–ü—Ä–µ—Ü–∏–∑–Ω–æ 3D –∑–∞–º–µ—Ä–≤–∞–Ω–µ —Å –ª–∞–∑–µ—Ä", price: "300 –ª–≤" },
                            { name: "–î—ä–ª–±–æ–∫–æ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ", description: "–ü—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–æ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ —Å –º–∞—à–∏–Ω–∏", price: "5 –ª–≤/–º¬≤" },
                            { name: "–ì—Ä—É–Ω–¥–∏—Ä–∞–Ω–µ", description: "–°–ø–µ—Ü–∏–∞–ª–Ω–æ –≥—Ä—É–Ω–¥–∏—Ä–∞–Ω–µ –∑–∞ –ø–æ–¥–æ–±—Ä–∞ –∞–¥—Ö–µ–∑–∏—è", price: "4 –ª–≤/–º¬≤" },
                            { name: "–°–∞–º–æ–Ω–∏–≤–µ–ª–∏—Ä–∞—â–∞ –∑–∞–º–∞–∑–∫–∞", description: "–ò–∑—Ä–∞–≤–Ω—è–≤–∞–Ω–µ –¥–æ –∏–¥–µ–∞–ª–Ω–∞ —Ä–∞–≤–Ω–æ—Å—Ç", price: "15 –ª–≤/–º¬≤" }
                        ]
                    },
                    {
                        category: "–ü—Ä–µ–º–∏—É–º –º–æ–Ω—Ç–∞–∂",
                        items: [
                            { name: "–ï–∫—Å–ø–µ—Ä—Ç–Ω–æ –ø–æ–ª–∞–≥–∞–Ω–µ", description: "–ú–æ–Ω—Ç–∞–∂ –æ—Ç –º–∞–π—Å—Ç–æ—Ä —Å 15+ –≥–æ–¥–∏–Ω–∏ –æ–ø–∏—Ç", price: "18 –ª–≤/–º¬≤" },
                            { name: "–°–ø–µ—Ü–∏–∞–ª–Ω–∏ —Å—Ä–µ–∑–æ–≤–µ", description: "–°–ª–æ–∂–Ω–∏ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∏ —Ñ–æ—Ä–º–∏ –∏ –¥–µ—Ç–∞–π–ª–∏", price: "–≤–∫–ª—é—á–µ–Ω–æ" },
                            { name: "–ü—Ä–µ–º–∏—É–º –ø–µ—Ä–≤–∞–∑–∏", description: "–ü—ä—Ä–≤–æ–∫–ª–∞—Å–Ω–∏ –¥—ä—Ä–≤–µ–Ω–∏ –ø—ä—Ä–≤–∞–∑–∏ —Å –º–æ–Ω—Ç–∞–∂", price: "15 –ª–≤/–ª–º" },
                            { name: "–ü—Ä–∞–≥–æ–≤–µ –∏ –ø—Ä–æ—Ñ–∏–ª–∏", description: "–ê–ª—É–º–∏–Ω–∏–µ–≤–∏ –ø—Ä–∞–≥–æ–≤–µ –º–µ–∂–¥—É –ø–æ–º–µ—â–µ–Ω–∏—è—Ç–∞", price: "–≤–∫–ª—é—á–µ–Ω–æ" }
                        ]
                    },
                    {
                        category: "–ó–∞–≤—ä—Ä—à–≤–∞–Ω–µ",
                        items: [
                            { name: "–õ–∞–∫–∏—Ä–∞–Ω–µ", description: "–î–≤—É–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ–Ω –ª–∞–∫ –∑–∞ –º–∞–∫—Å–∏–º–∞–ª–Ω–∞ –∑–∞—â–∏—Ç–∞", price: "8 –ª–≤/–º¬≤" },
                            { name: "–ü–æ–ª–∏—Ä–∞–Ω–µ", description: "–ú–∞—à–∏–Ω–Ω–æ –ø–æ–ª–∏—Ä–∞–Ω–µ –¥–æ –æ–≥–ª–µ–¥–∞–ª–µ–Ω –±–ª—è—Å—ä–∫", price: "4 –ª–≤/–º¬≤" },
                            { name: "–ó–∞—â–∏—Ç–Ω–æ –ø–æ–∫—Ä–∏—Ç–∏–µ", description: "–°–ø–µ—Ü–∏–∞–ª–Ω–æ –∑–∞—â–∏—Ç–Ω–æ –ø–æ–∫—Ä–∏—Ç–∏–µ", price: "3 –ª–≤/–º¬≤" },
                            { name: "–î–µ—Ç–∞–π–ª–Ω–æ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ", description: "–ü–µ—Ä—Ñ–µ–∫—Ç–Ω–æ –ø–æ—á–∏—Å—Ç–≤–∞–Ω–µ –∏ –¥–µ–∑–∏–Ω—Ñ–µ–∫—Ü–∏—è", price: "–≤–∫–ª—é—á–µ–Ω–æ" }
                        ]
                    }
                ]
            }
        };

        function showInstallationDetails(installationType) {
            const details = installationDetails[installationType];
            const variant = projectData.variants[currentVariant];
            const price = variant.installationOptions[installationType].price;
            
            // Update modal title and price
            document.getElementById('modalTitle').textContent = `üîß ${details.title}`;
            document.getElementById('modalTotalPrice').textContent = `${price.toLocaleString('bg-BG')} –ª–≤`;
            
            // Generate content
            const content = document.getElementById('installationDetailsContent');
            content.innerHTML = '';
            
            details.services.forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'service-category';
                
                const itemsHTML = category.items.map(item => `
                    <div class="service-item">
                        <div class="service-item-info">
                            <div class="service-item-name">${item.name}</div>
                            <div class="service-item-description">${item.description}</div>
                        </div>
                        <div class="service-item-price">${item.price}</div>
                    </div>
                `).join('');
                
                categoryDiv.innerHTML = `
                    <h3>üìã ${category.category}</h3>
                    <div class="service-items">
                        ${itemsHTML}
                    </div>
                `;
                
                content.appendChild(categoryDiv);
            });
            
            // Show modal
            document.getElementById('installationModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            document.getElementById('installationModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function openInstallationGallery(imageId) {
            const galleryImages = {
                1: "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–∞—Ç–∞",
                2: "–ú–æ–Ω—Ç–∞–∂ –≤ –ø—Ä–æ—Ü–µ—Å", 
                3: "–§–∏–Ω–∞–ª–µ–Ω —Ä–µ–∑—É–ª—Ç–∞—Ç",
                4: "–ü–æ—á–∏—Å—Ç–≤–∞–Ω–µ –∏ –ø—Ä–µ–¥–∞–≤–∞–Ω–µ"
            };
            
            alert(`üñºÔ∏è –û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –≥–∞–ª–µ—Ä–∏—è: ${galleryImages[imageId]}\n\n–¢—É–∫ —â–µ —Å–µ –ø–æ–∫–∞–∂–∞—Ç —Ä–µ–∞–ª–Ω–∏ —Å–Ω–∏–º–∫–∏ –æ—Ç –º–æ–Ω—Ç–∞–∂–Ω–∏ —Ä–∞–±–æ—Ç–∏.`);
        }

        // AI Chat functionality
        let aiChatOpen = false;
        let conversationHistory = [];
        let isAITyping = false;

        function toggleAIChat() {
            aiChatOpen = !aiChatOpen;
            const chatWindow = document.getElementById('aiChatWindow');
            const notification = document.getElementById('aiNotification');
            
            if (aiChatOpen) {
                chatWindow.classList.add('active');
                notification.style.display = 'none';
                document.getElementById('aiChatBubble').classList.remove('has-notification');
                
                // Auto-suggest based on current state
                updateAISuggestions();
            } else {
                chatWindow.classList.remove('active');
            }
        }

        function closeAIChat() {
            aiChatOpen = false;
            document.getElementById('aiChatWindow').classList.remove('active');
        }

        function updateAISuggestions() {
            const variant = projectData.variants[currentVariant];
            const variantName = variant.name || `–í–∞—Ä–∏–∞–Ω—Ç ${currentVariant}`;
            const installationName = variant.installationOptions[currentInstallation].name;
            
            const suggestions = [
                `–ó–∞—â–æ –¥–∞ –∏–∑–±–µ—Ä–∞ ${variantName}?`,
                `–ö–∞–∫–≤–æ –≤–∫–ª—é—á–≤–∞ ${installationName}?`,
                `–ú–æ–≥–∞ –ª–∏ –¥–∞ –ø–æ–ª—É—á–∞ –æ—Ç—Å—Ç—ä–ø–∫–∞?`,
                `–ö–æ–≥–∞ –º–æ–∂–µ –¥–∞ –∑–∞–ø–æ—á–Ω–µ –º–æ–Ω—Ç–∞–∂—ä—Ç?`
            ];
            
            const container = document.getElementById('aiSuggestions');
            container.innerHTML = suggestions.map(suggestion => 
                `<div class="suggestion-chip" onclick="askAI('${suggestion}')">${suggestion}</div>`
            ).join('');
        }

        function askAI(question) {
            // Add user message to chat
            addMessageToChat('user', question);
            
            // Send to AI
            sendToAI(question);
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (message && !isAITyping) {
                input.value = '';
                askAI(message);
            }
        }

        function handleAIInputKeypress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendAIMessage();
            }
        }

        function addMessageToChat(sender, message) {
            const messagesContainer = document.getElementById('aiChatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = sender === 'user' ? 'user-message' : 'ai-message';
            messageDiv.textContent = message;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showAITyping() {
            isAITyping = true;
            document.getElementById('aiTyping').classList.add('active');
            document.getElementById('aiChatSend').disabled = true;
            
            const messagesContainer = document.getElementById('aiChatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideAITyping() {
            isAITyping = false;
            document.getElementById('aiTyping').classList.remove('active');
            document.getElementById('aiChatSend').disabled = false;
        }

        async function sendToAI(userMessage) {
            showAITyping();
            
            // Add user message to conversation history
            conversationHistory.push({
                role: 'user',
                content: userMessage
            });
            
            try {
                // Get current offer context
                const offerContext = getOfferContext();
                
                // Create comprehensive prompt with full context
                const prompt = createAIPrompt(userMessage, offerContext);
                
                // Send to Claude
                const response = await window.claude.complete(prompt);
                
                // Parse JSON response
                const aiResponse = JSON.parse(response);
                
                // Add AI response to conversation history
                conversationHistory.push({
                    role: 'assistant',
                    content: aiResponse.response
                });
                
                // Display response
                hideAITyping();
                addMessageToChat('ai', aiResponse.response);
                
                // Update suggestions if provided
                if (aiResponse.suggestions && aiResponse.suggestions.length > 0) {
                    updateSuggestionsFromAI(aiResponse.suggestions);
                }
                
            } catch (error) {
                console.error('AI Error:', error);
                hideAITyping();
                addMessageToChat('ai', '–ò–∑–≤–∏–Ω—è–≤–∞–π—Ç–µ, –≤—ä–∑–Ω–∏–∫–Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –≥—Ä–µ—à–∫–∞. –ú–æ–ª—è –æ–ø–∏—Ç–∞–π—Ç–µ –æ—Ç–Ω–æ–≤–æ –∏–ª–∏ —Å–µ —Å–≤—ä—Ä–∂–µ—Ç–µ —Å –Ω–∞—à–∏—è –µ–∫–∏–ø –∑–∞ –ø–æ–º–æ—â.');
            }
        }

        function getOfferContext() {
            const variant = projectData.variants[currentVariant];
            const materialsPrice = variant.materialsCost;
            const installationPrice = variant.installationOptions[currentInstallation].price;
            const total = (materialsPrice + installationPrice) * 1.2; // with VAT
            
            return {
                projectName: document.getElementById('projectTitle').textContent,
                currentVariant: currentVariant,
                variantName: variant.name || `–í–∞—Ä–∏–∞–Ω—Ç ${currentVariant}`,
                currentInstallation: currentInstallation,
                installationName: variant.installationOptions[currentInstallation].name,
                materialsPrice: materialsPrice,
                installationPrice: installationPrice,
                totalPrice: total,
                area: "400 –º¬≤", // from the example
                rooms: [
                    { name: "–î–Ω–µ–≤–Ω–∞", area: "85 –º¬≤", discount: "5%" },
                    { name: "–°–ø–∞–ª–Ω—è", area: "35 –º¬≤", discount: "5%" }
                ]
            };
        }

        function createAIPrompt(userMessage, context) {
            const conversationHistoryText = conversationHistory.length > 0 ? 
                `\n\n–ü—Ä–µ–¥–∏—à–µ–Ω —Ä–∞–∑–≥–æ–≤–æ—Ä:\n${JSON.stringify(conversationHistory)}` : '';
            
            return `–¢–∏ —Å–∏ AI –∞—Å–∏—Å—Ç–µ–Ω—Ç –Ω–∞ PARKETSENSE - –≤–æ–¥–µ—â–∞ –∫–æ–º–ø–∞–Ω–∏—è –∑–∞ –ø–æ–¥–æ–≤–∏ –ø–æ–∫—Ä–∏—Ç–∏—è –≤ –ë—ä–ª–≥–∞—Ä–∏—è. –û—Ç–≥–æ–≤–∞—Ä—è—à –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ –æ—Ñ–µ—Ä—Ç–∞.

–ö–û–ù–¢–ï–ö–°–¢ –ù–ê –û–§–ï–†–¢–ê–¢–ê:
- –ü—Ä–æ–µ–∫—Ç: ${context.projectName}
- –¢–µ–∫—É—â –∏–∑–±–æ—Ä: ${context.variantName}
- –ú–æ–Ω—Ç–∞–∂: ${context.installationName}
- –û–±—â–∞ –ø–ª–æ—â: ${context.area}
- –°—Ç–∞–∏: ${context.rooms.map(r => `${r.name} (${r.area})`).join(', ')}
- –¶–µ–Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∏: ${context.materialsPrice.toLocaleString('bg-BG')} –ª–≤
- –¶–µ–Ω–∞ –º–æ–Ω—Ç–∞–∂: ${context.installationPrice.toLocaleString('bg-BG')} –ª–≤  
- –û–±—â–∞ —Ü–µ–Ω–∞: ${context.totalPrice.toLocaleString('bg-BG')} –ª–≤ (—Å –î–î–°)

–ï–ö–°–ü–ï–†–¢–ò–ó–ê:
- –ü–∞—Ä–∫–µ—Ç–∏: –î—ä–±, –±—É–∫, —è—Å–µ–Ω, –µ–∫–∑–æ—Ç–∏—á–Ω–∏ –¥—ä—Ä–≤–µ—Ç–∞
- –ú–æ–Ω—Ç–∞–∂: –°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω (2–≥ –≥–∞—Ä–∞–Ω—Ü–∏—è), –ü—Ä–µ–º–∏—É–º (3–≥ –≥–∞—Ä–∞–Ω—Ü–∏—è)
- –°—Ö–µ–º–∏: –†–∏–±–µ–Ω–∞ –∫–æ—Å—Ç, –ø—Ä–∞–≤ –ø–∞—Ä–∫–µ—Ç, —Ñ—Ä–µ–Ω—Å–∫–∏ –ø–∞—Ä–∫–µ—Ç
- –ü—Ä–æ—Ü–µ—Å–∏: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞, –ø–æ–ª–∞–≥–∞–Ω–µ, –ª–∞–∫–∏—Ä–∞–Ω–µ, —Ñ–∏–Ω–∏—à–∏—Ä–∞–Ω–µ

–ü–†–ê–í–ò–õ–ê:
1. –û—Ç–≥–æ–≤–∞—Ä—è–π –∫—Ä–∞—Ç–∫–æ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ (–º–∞–∫—Å–∏–º—É–º 100 –¥—É–º–∏)
2. –ò–∑–ø–æ–ª–∑–≤–∞–π –¥–∞–Ω–Ω–∏—Ç–µ –æ—Ç –æ—Ñ–µ—Ä—Ç–∞—Ç–∞
3. –ë—ä–¥–∏ –µ–∫—Å–ø–µ—Ä—Ç –ø–æ –ø–æ–¥–æ–≤–∏ –ø–æ–∫—Ä–∏—Ç–∏—è
4. –î–∞–π –ø—Ä–∞–∫—Ç–∏—á–Ω–∏ —Å—ä–≤–µ—Ç–∏
5. –ü—Ä–µ–¥–ª–∞–≥–∞–π –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ –∫–æ–≥–∞—Ç–æ –µ –ø–æ–¥—Ö–æ–¥—è—â–æ${conversationHistoryText}

–í–™–ü–†–û–° –û–¢ –ö–õ–ò–ï–ù–¢–ê: "${userMessage}"

–û—Ç–≥–æ–≤–æ—Ä–∏ –°–ê–ú–û —Å –≤–∞–ª–∏–¥–µ–Ω JSON –≤ —Ç–æ–∑–∏ —Ñ–æ—Ä–º–∞—Ç:
{
  "response": "—Ç–≤–æ—è—Ç –µ–∫—Å–ø–µ—Ä—Ç–µ–Ω –æ—Ç–≥–æ–≤–æ—Ä —Ç—É–∫",
  "suggestions": ["–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 1", "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 2", "–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ 3"]
}

–í–ê–ñ–ù–û: –û—Ç–≥–æ–≤–æ—Ä–∏ –°–ê–ú–û —Å JSON. –ù–µ –¥–æ–±–∞–≤—è–π –¥—Ä—É–≥–∏ —Ç–µ–∫—Å—Ç–æ–≤–µ –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ.`;
        }

        function updateSuggestionsFromAI(suggestions) {
            const container = document.getElementById('aiSuggestions');
            container.innerHTML = suggestions.map(suggestion => 
                `<div class="suggestion-chip" onclick="askAI('${suggestion}')">${suggestion}</div>`
            ).join('');
        }

        // Initialize AI notification
        function showAINotification() {
            document.getElementById('aiNotification').style.display = 'block';
            document.getElementById('aiChatBubble').classList.add('has-notification');
        }

        // Show notification after page load
        setTimeout(() => {
            if (!aiChatOpen) {
                showAINotification();
            }
        }, 3000);

        // Close modal on outside click
        document.getElementById('installationModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal on Escape key  
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                if (aiChatOpen) {
                    closeAIChat();
                }
            }
        });

        function openGallery(roomId, imageId) {
            alert(`üñºÔ∏è –û—Ç–≤–∞—Ä—è–Ω–µ –Ω–∞ –≥–∞–ª–µ—Ä–∏—è –∑–∞ ${roomId}, —Å–Ω–∏–º–∫–∞ ${imageId}\n\n–¢—É–∫ —â–µ —Å–µ –æ—Ç–≤–æ—Ä–∏ lightbox —Å —Ä–µ–∞–ª–Ω–∏ —Å–Ω–∏–º–∫–∏ –æ—Ç –ø—Ä–æ–µ–∫—Ç–∞.`);
        }

        function updateClientNotes(notes) {
            console.log('Client notes updated:', notes);
            // Here you would send to backend in real implementation
        }

        function acceptOffer() {
            const variant = projectData.variants[currentVariant];
            const total = document.getElementById('total-price').textContent;
            
            // Add to AI conversation for context
            conversationHistory.push({
                role: 'user',
                content: `–ü—Ä–∏–µ—Ö –æ—Ñ–µ—Ä—Ç–∞—Ç–∞: ${variant.name}, –æ–±—â–∞ —Å—É–º–∞: ${total}`
            });
            
            alert(`üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–∏–º –í–∏ –∑–∞ –ø—Ä–∏–µ–º–∞–Ω–µ—Ç–æ –Ω–∞ –æ—Ñ–µ—Ä—Ç–∞—Ç–∞!

üìã –ò–∑–±—Ä–∞–Ω –≤–∞—Ä–∏–∞–Ω—Ç: ${variant.name}
üí∞ –û–±—â–∞ —Å—É–º–∞: ${total}

üìß –©–µ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ email
üìû –©–µ —Å–µ —Å–≤—ä—Ä–∂–µ–º —Å –í–∞—Å –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ 2 —á–∞—Å–∞
üìÖ –©–µ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–∞–º–µ –¥–∞—Ç–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ –º–æ–Ω—Ç–∞–∂

üí¨ AI –∞—Å–∏—Å—Ç–µ–Ω—Ç—ä—Ç –æ—Å—Ç–∞–≤–∞ –Ω–∞ —Ä–∞–∑–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∑–∞ –≤—ä–ø—Ä–æ—Å–∏!`);
        }

        function requestChanges() {
            // Show AI suggestion
            if (!aiChatOpen) {
                showAINotification();
                setTimeout(() => {
                    addMessageToChat('ai', '–í–∏–∂–¥–∞–º, —á–µ –∏—Å–∫–∞—Ç–µ –ø—Ä–æ–º–µ–Ω–∏ –≤ –æ—Ñ–µ—Ä—Ç–∞—Ç–∞. –ö–∞–∫ –º–æ–≥–∞ –¥–∞ –≤–∏ –ø–æ–º–æ–≥–Ω–∞? –ú–æ–≥–∞ –¥–∞ –æ–±—è—Å–Ω—è —Ä–∞–∑–ª–∏—á–Ω–∏—Ç–µ –æ–ø—Ü–∏–∏ –∏–ª–∏ –¥–∞ –æ—Ç–≥–æ–≤–æ—Ä—è –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏.');
                }, 1000);
            }
            
            alert('üìù –í–∞—à–µ—Ç–æ –∏—Å–∫–∞–Ω–µ –∑–∞ –ø—Ä–æ–º–µ–Ω–∏ –µ –ø–æ–ª—É—á–µ–Ω–æ.\n\n–ù–∞—à–∏—è—Ç –µ–∫–∏–ø —â–µ –ø—Ä–µ–≥–ª–µ–¥–∞ –í–∞—à–∏—Ç–µ –∑–∞–±–µ–ª–µ–∂–∫–∏ –∏ —â–µ –í–∏ –∏–∑–ø—Ä–∞—Ç–∏ –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –æ—Ñ–µ—Ä—Ç–∞ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ 24 —á–∞—Å–∞.\n\nüí° –ú–æ–∂–µ—Ç–µ —Å—ä—â–æ –¥–∞ –ø–æ–ø–∏—Ç–∞—Ç–µ AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ –∑–∞ –∞–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏!');
        }

        function downloadPDF() {
            alert('üìÑ PDF —Ñ–∞–π–ª—ä—Ç —Å–µ –≥–µ–Ω–µ—Ä–∏—Ä–∞...\n\n–ò–∑—Ç–µ–≥–ª—è–Ω–µ—Ç–æ —â–µ –∑–∞–ø–æ—á–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.');
        }

        function scheduleMeeting() {
            alert('üìÖ –ü—Ä–µ–Ω–∞—Å–æ—á–≤–∞–Ω–µ –∫—ä–º –∫–∞–ª–µ–Ω–¥–∞—Ä–∞...\n\n–ú–æ–∂–µ –¥–∞ –∏–∑–±–∏—Ä–∞—Ç–µ —É–¥–æ–±–Ω–æ –≤—Ä–µ–º–µ –æ—Ç –Ω–∞–ª–∏—á–Ω–∏—Ç–µ —Å–ª–æ—Ç–æ–≤–µ.');
        }

        // Initialize
        updateInstallationOptions();
        updatePricing();
        
        // Sticky comparison enhancements
        let isScrolled = false;
        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const comparison = document.querySelector('.variants-overview');
            
            if (scrollTop > 100 && !isScrolled) {
                comparison.classList.add('scrolled');
                isScrolled = true;
            } else if (scrollTop <= 100 && isScrolled) {
                comparison.classList.remove('scrolled');
                isScrolled = false;
            }
        });
    </script>
</body>
</html>