<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PARKETSENSE - –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.4;
        }

        .container {
            background: white;
            margin: 20px auto;
            max-width: 1200px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Header */
        .header {
            background: #333;
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 500;
        }

        .header h1 {
            font-size: 16px;
            font-weight: 500;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            border-radius: 3px;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Content */
        .content {
            padding: 20px;
            background: white;
        }

        /* Names Section */
        .names-section {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .names-section h3 {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .names-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #555;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 13px;
            background: white;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.1);
        }

        .auto-generated {
            background: #e9ecef !important;
            color: #495057;
        }

        .required::after {
            content: ' *';
            color: #dc3545;
        }

        /* Main Grid */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .section-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            overflow: hidden;
        }

        .section-header {
            background: #333;
            color: white;
            padding: 12px 15px;
            font-size: 14px;
            font-weight: 500;
        }

        .section-content {
            padding: 15px;
        }

        /* Attributes Section */
        .attributes-section {
            grid-column: 1 / -1;
            margin: 20px 0;
        }

        .attributes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .attribute-row {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .attribute-label {
            min-width: 120px;
            font-size: 13px;
            font-weight: 500;
            color: #555;
        }

        .attribute-row select,
        .attribute-row input {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #ced4da;
            border-radius: 3px;
            font-size: 13px;
        }

        .add-btn {
            background: #28a745;
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .add-btn:hover {
            background: #218838;
        }

        /* Media Section */
        .media-section {
            grid-column: 1 / -1;
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .media-upload {
            background: #f8f9fa;
            border: 1px dashed #ced4da;
            border-radius: 4px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }

        .media-upload:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }

        .media-upload input[type="file"] {
            display: none;
        }

        .media-upload-title {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .media-upload-desc {
            font-size: 11px;
            color: #6c757d;
        }

        /* Pricing Section */
        .pricing-section {
            grid-column: 1 / -1;
        }

        .pricing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 16px;
            height: 16px;
        }

        .checkbox-group label {
            font-size: 13px;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            background: #f8f9fa;
            padding: 15px 20px;
            border-top: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-info {
            font-size: 12px;
            color: #6c757d;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
            margin-right: 10px;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-primary {
            background: #28a745;
            color: white;
        }

        .btn-primary:hover {
            background: #218838;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 16px;
            border-radius: 4px;
            font-size: 13px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #dc3545;
        }

        .notification.warning {
            background: #ffc107;
            color: #333;
        }

        .empty-state {
            text-align: center;
            padding: 30px;
            color: #6c757d;
            font-size: 13px;
        }

        .loading {
            position: relative;
            pointer-events: none;
            opacity: 0.6;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 16px;
            height: 16px;
            margin: -8px 0 0 -8px;
            border: 2px solid #007bff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-grid,
            .names-grid,
            .pricing-grid {
                grid-template-columns: 1fr;
            }
            
            .attributes-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                margin: 10px;
            }
            
            .content {
                padding: 15px;
            }
        }

        /* Utility classes */
        .text-muted {
            color: #6c757d;
        }

        .font-weight-bold {
            font-weight: 600;
        }

        .mb-0 {
            margin-bottom: 0;
        }

        .mt-2 {
            margin-top: 8px;
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç</h1>
            <button class="close-btn" onclick="closeModal()">‚úï</button>
        </div>

        <div class="content">
            <!-- Names Section -->
            <div class="names-section">
                <h3>–û—Å–Ω–æ–≤–Ω–∏ –∏–º–µ–Ω–∞ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞</h3>
                <div class="names-grid">
                    <div class="form-group">
                        <label for="nameBg" class="required">–ò–º–µ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏</label>
                        <input type="text" id="nameBg" class="auto-generated" readonly 
                               placeholder="–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–æ –∏–º–µ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏">
                    </div>
                    <div class="form-group">
                        <label for="nameEn" class="required">–ò–º–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏</label>
                        <input type="text" id="nameEn" class="auto-generated" readonly 
                               placeholder="Auto-generated English name">
                    </div>
                </div>
                <p class="text-muted mt-2" style="font-size: 12px;">
                    –ò–º–µ–Ω–∞—Ç–∞ —Å–µ –æ–±–Ω–æ–≤—è–≤–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø—Ä–æ–º—è–Ω–∞ –Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–∏—Ç–µ
                </p>
            </div>

            <div class="main-grid">
                <!-- Basic Information -->
                <div class="section-card">
                    <div class="section-header">–û—Å–Ω–æ–≤–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="productType" class="required">–¢–∏–ø –ø—Ä–æ–¥—É–∫—Ç</label>
                            <select id="productType" onchange="loadAttributesForType()">
                                <option value="">–ò–∑–±–µ—Ä–∏ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç...</option>
                                <option value="parquet">–ü–∞—Ä–∫–µ—Ç</option>
                                <option value="doors">–í—Ä–∞—Ç–∏</option>
                                <option value="furniture">–ú–µ–±–µ–ª–∏</option>
                                <option value="wall-coverings">–°—Ç–µ–Ω–Ω–∏ –æ–±–ª–∏—Ü–æ–≤–∫–∏</option>
                                <option value="wall-decorations">–î–µ–∫–æ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—Ç–µ–Ω–∞</option>
                                <option value="installation">–£—Å–ª—É–≥–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂</option>
                                <option value="materials">–ú–∞—Ç–µ—Ä–∏–∞–ª–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="code">–ö–æ–¥</label>
                            <input type="text" id="code" placeholder="–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω –∏–ª–∏ —Ä—ä—á–µ–Ω">
                        </div>

                        <div class="form-group">
                            <label for="supplier">–î–æ—Å—Ç–∞–≤—á–∏–∫</label>
                            <select id="supplier">
                                <option value="">–ò–∑–±–µ—Ä–∏ –¥–æ—Å—Ç–∞–≤—á–∏–∫...</option>
                                <option value="supplier1">–î–æ—Å—Ç–∞–≤—á–∏–∫ 1</option>
                                <option value="supplier2">–î–æ—Å—Ç–∞–≤—á–∏–∫ 2</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="manufacturer" class="required">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª</label>
                            <select id="manufacturer" onchange="filterAttributesByManufacturer()">
                                <option value="">–ò–∑–±–µ—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª...</option>
                                <option value="hickx">Hickx</option>
                                <option value="bauwerk">Bauwerk</option>
                                <option value="foglie-doro">Foglie d'Oro</option>
                                <option value="quick-step">Quick-Step</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Additional Info -->
                <div class="section-card">
                    <div class="section-header">–î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="unit">–ú–µ—Ä–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞</label>
                            <select id="unit">
                                <option value="m2">–∫–≤.–º</option>
                                <option value="m">–ª.–º</option>
                                <option value="piece">–±—Ä–æ—è</option>
                                <option value="package">–ø–∞–∫–µ—Ç</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="packageSize">–ì–æ–ª–µ–º–∏–Ω–∞ –Ω–∞ –ø–∞–∫–µ—Ç</label>
                            <input type="text" id="packageSize" placeholder="–Ω–∞–ø—Ä. 2.4 –∫–≤.–º">
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="active" checked>
                            <label for="active">–ê–∫—Ç–∏–≤–µ–Ω –ø—Ä–æ–¥—É–∫—Ç</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="recommended">
                            <label for="recommended">–ü—Ä–µ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–µ–Ω</label>
                        </div>

                        <div class="checkbox-group">
                            <input type="checkbox" id="newProduct" checked>
                            <label for="newProduct">–ù–æ–≤ –ø—Ä–æ–¥—É–∫—Ç</label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dynamic Attributes Section -->
            <div class="section-card attributes-section" id="attributesSection" style="display: none;">
                <div class="section-header">–ê—Ç—Ä–∏–±—É—Ç–∏ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞</div>
                <div class="section-content">
                    <div class="attributes-grid" id="attributesContainer">
                        <div class="empty-state">
                            <p>–ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç –∑–∞ –¥–∞ —Å–µ –∑–∞—Ä–µ–¥—è—Ç –∞—Ç—Ä–∏–±—É—Ç–∏—Ç–µ</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section-card media-section">
                <div class="section-header">–ú–µ–¥–∏–π–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ</div>
                <div class="section-content">
                    <div class="media-grid">
                        <div class="media-upload" onclick="document.getElementById('images').click()">
                            <div class="media-upload-title">üì∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                            <div class="media-upload-desc">JPG, PNG, WebP –¥–æ 10MB</div>
                            <input type="file" id="images" multiple accept="image/*">
                        </div>
                        
                        <div class="media-upload" onclick="document.getElementById('documents').click()">
                            <div class="media-upload-title">üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∏</div>
                            <div class="media-upload-desc">PDF, DOC, XLS –¥–æ 25MB</div>
                            <input type="file" id="documents" multiple accept=".pdf,.doc,.docx,.xls,.xlsx">
                        </div>

                        <div class="media-upload">
                            <div class="media-upload-title">üé• –í–∏–¥–µ–æ –ª–∏–Ω–∫</div>
                            <input type="url" placeholder="YouTube/Vimeo URL" style="margin-top: 8px; width: 100%; font-size: 12px;">
                        </div>

                        <div class="media-upload" onclick="document.getElementById('models3d').click()">
                            <div class="media-upload-title">üé≤ 3D –º–æ–¥–µ–ª–∏</div>
                            <div class="media-upload-desc">OBJ, FBX, GLB –¥–æ 50MB</div>
                            <input type="file" id="models3d" multiple accept=".obj,.fbx,.glb,.gltf">
                        </div>

                        <div class="media-upload" onclick="document.getElementById('textures').click()">
                            <div class="media-upload-title">üé® –¢–µ–∫—Å—Ç—É—Ä–∏</div>
                            <div class="media-upload-desc">–í—Å–∏—á–∫–∏ image —Ñ–æ—Ä–º–∞—Ç–∏</div>
                            <input type="file" id="textures" multiple accept="image/*">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pricing Section -->
            <div class="section-card pricing-section">
                <div class="section-header">–¶–µ–Ω–æ–æ–±—Ä–∞–∑—É–≤–∞–Ω–µ</div>
                <div class="section-content">
                    <div class="checkbox-group">
                        <input type="checkbox" id="autoPricing" checked onchange="toggleAutoPricing()">
                        <label for="autoPricing">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–µ—Å–º—è—Ç–∞–Ω–µ –Ω–∞ —Ü–µ–Ω–∏—Ç–µ</label>
                    </div>

                    <div class="pricing-grid">
                        <div class="form-group">
                            <label for="costEur" class="required">–î–æ—Å—Ç–∞–≤–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –î–î–° (EUR)</label>
                            <input type="number" id="costEur" step="0.01" placeholder="0.00" onchange="calculatePrices()">
                        </div>

                        <div class="form-group">
                            <label for="costBgn">–î–æ—Å—Ç–∞–≤–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –î–î–° (BGN)</label>
                            <input type="number" id="costBgn" class="auto-generated" readonly placeholder="–ê–≤—Ç–æ–∏–∑—á–∏—Å–ª–µ–Ω–∞">
                        </div>

                        <div class="form-group">
                            <label for="saleBgn">–ü—Ä–æ–¥–∞–∂–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –î–î–° (BGN)</label>
                            <input type="number" id="saleBgn" class="auto-generated" readonly placeholder="–ê–≤—Ç–æ–∏–∑—á–∏—Å–ª–µ–Ω–∞">
                        </div>

                        <div class="form-group">
                            <label for="saleEur">–ü—Ä–æ–¥–∞–∂–Ω–∞ —Ü–µ–Ω–∞ –±–µ–∑ –î–î–° (EUR)</label>
                            <input type="number" id="saleEur" class="auto-generated" readonly placeholder="–ê–≤—Ç–æ–∏–∑—á–∏—Å–ª–µ–Ω–∞">
                        </div>

                        <div class="form-group">
                            <label for="markup">Markup %</label>
                            <input type="number" id="markup" value="30" class="auto-generated" readonly placeholder="–û—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-info">
                –í—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞ —Å * —Å–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏
            </div>
            <div>
                <button type="button" class="btn btn-secondary" onclick="closeModal()">
                    –û—Ç–∫–∞–∑
                </button>
                <button type="button" class="btn btn-primary" onclick="saveProduct()">
                    –ü–û–¢–í–™–†–î–ò
                </button>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <script>
        // Product attributes configuration (same as before)
        const productAttributes = {
            parquet: [
                { id: 'construction_type', label: '–¢–∏–ø –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è', type: 'select', required: true },
                { id: 'wood_type', label: '–î—ä—Ä–≤–µ—Å–∏–Ω–∞/–ú–∞—Ç–µ—Ä–∏–∞–ª', type: 'select', required: true },
                { id: 'category', label: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è', type: 'select', required: false },
                { id: 'collection', label: '–ö–æ–ª–µ–∫—Ü–∏—è', type: 'select', required: false },
                { id: 'finish', label: '–§–∏–Ω–∏—à', type: 'select', required: true },
                { id: 'selection', label: '–°–µ–ª–µ–∫—Ü–∏—è', type: 'select', required: false },
                { id: 'color', label: '–¶–≤—è—Ç', type: 'select', required: true },
                { id: 'thickness', label: '–î–µ–±–µ–ª–∏–Ω–∞ (–º–º)', type: 'number', required: true },
                { id: 'width', label: '–®–∏—Ä–∏–Ω–∞ (–º–º)', type: 'number', required: true },
                { id: 'length', label: '–î—ä–ª–∂–∏–Ω–∞ (–º–º)', type: 'number', required: true }
            ],
            doors: [
                { id: 'door_type', label: '–¢–∏–ø –≤—Ä–∞—Ç–∞', type: 'select', required: true },
                { id: 'collection', label: '–ö–æ–ª–µ–∫—Ü–∏—è', type: 'select', required: false },
                { id: 'finish_push', label: '–§–∏–Ω–∏—à –æ—Ç –ø—É—à —Å—Ç—Ä–∞–Ω–∞', type: 'select', required: true },
                { id: 'finish_pull', label: '–§–∏–Ω–∏—à –æ—Ç –ø—É–ª —Å—Ç—Ä–∞–Ω–∞', type: 'select', required: true },
                { id: 'lock_type', label: '–í–∏–¥ –±—Ä–∞–≤–∞', type: 'select', required: true },
                { id: 'opening_direction', label: '–ü–æ—Å–æ–∫–∞ –æ—Ç–≤–∞—Ä—è–Ω–µ', type: 'select', required: true },
                { id: 'height', label: '–í–∏—Å–æ—á–∏–Ω–∞ (–º–º)', type: 'number', required: true },
                { id: 'width', label: '–®–∏—Ä–∏–Ω–∞ (–º–º)', type: 'number', required: true }
            ],
            furniture: [
                { id: 'furniture_style', label: '–°—Ç–∏–ª –º–µ–±–µ–ª–∏', type: 'select', required: true },
                { id: 'furniture_type', label: '–¢–∏–ø –º–µ–±–µ–ª', type: 'select', required: true },
                { id: 'material', label: '–ú–∞—Ç–µ—Ä–∏–∞–ª', type: 'select', required: true },
                { id: 'finish', label: '–§–∏–Ω–∏—à', type: 'select', required: true },
                { id: 'color', label: '–¶–≤—è—Ç', type: 'select', required: true }
            ]
        };

        // Attribute values by manufacturer (same as before)
        const attributeValues = {
            hickx: {
                construction_type: ['–ò–Ω–∂–µ–Ω–µ—Ä–µ–Ω', '–ú–∞—Å–∏–≤–µ–Ω'],
                wood_type: ['–î—ä–±', '–û—Ä–µ—Ö', '–Ø—Å–µ–Ω'],
                finish: ['–ú–∞—Ç', '–°–∞—Ç–µ–Ω'],
                color: ['–ù–∞—Ç—É—Ä–∞–ª–µ–Ω', '–¢—ä–º–µ–Ω –æ—Ä–µ—Ö', '–ê–Ω—Ç–∏–∫ –¥—ä–±'],
                collection: ['Elegance', 'Classic', 'Premium']
            },
            bauwerk: {
                construction_type: ['–ò–Ω–∂–µ–Ω–µ—Ä–µ–Ω', '–ú–∞—Å–∏–≤–µ–Ω', '–ú–Ω–æ–≥–æ—Å–ª–æ–µ–Ω'],
                wood_type: ['–î—ä–±', '–û—Ä–µ—Ö', '–ë—É–∫', '–Ø—Å–µ–Ω'],
                finish: ['UV –ª–∞–∫', '–ú–∞—Å–ª–æ', '–í–æ—Å—ä–∫'],
                color: ['–ë—è–ª –¥—ä–±', '–°—Ä–µ–±—Ä–∏—Å—Ç –¥—ä–±', '–¢—ä–º–µ–Ω –≤–µ–Ω–≥–µ'],
                collection: ['Prestige', 'Premium', 'Classic']
            },
            'foglie-doro': {
                construction_type: ['–ò–Ω–∂–µ–Ω–µ—Ä–µ–Ω'],
                wood_type: ['–î—ä–±', '–û—Ä–µ—Ö'],
                finish: ['–ú–∞—Ç', '–ü–æ–ª—É–º–∞—Ç', '–ì–ª–∞–Ω—Ü'],
                color: ['–ë–∏–µ–ª –¥—ä–±', '–ö–∞—Ñ—è–≤ –¥—ä–±', '–°–∏–≤ –¥—ä–±', '–ß–µ—Ä–µ–Ω –¥—ä–±'],
                collection: ['Gold Collection', 'Silver Collection']
            },
            'quick-step': {
                construction_type: ['–õ–∞–º–∏–Ω–∞—Ç', '–í–∏–Ω–∏–ª', '–ò–Ω–∂–µ–Ω–µ—Ä–µ–Ω'],
                wood_type: ['–î—ä–±', '–û—Ä–µ—Ö', '–ö–ª–µ–Ω', '–í–∏—à–Ω–∞'],
                finish: ['–ú–∞—Ç', '–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω', '–¢–µ–∫—Å—Ç—É—Ä–∏—Ä–∞–Ω'],
                color: ['–ù–∞—Ç—É—Ä–∞–ª–µ–Ω –¥—ä–±', '–¢—ä–º–µ–Ω –¥—ä–±', '–ë—è–ª –¥—ä–±'],
                collection: ['Impressive', 'Classic', 'Majestic']
            }
        };

        let currentProductType = '';
        let currentManufacturer = '';

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification show ${type}`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function loadAttributesForType() {
            const productType = document.getElementById('productType').value;
            const container = document.getElementById('attributesContainer');
            const section = document.getElementById('attributesSection');
            
            if (!productType) {
                section.style.display = 'none';
                return;
            }

            currentProductType = productType;
            section.style.display = 'block';
            container.innerHTML = '';
            container.classList.add('loading');

            setTimeout(() => {
                const attributes = productAttributes[productType] || [];
                
                if (attributes.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <p>–ù—è–º–∞ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∏ –∞—Ç—Ä–∏–±—É—Ç–∏ –∑–∞ —Ç–æ–∑–∏ —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç</p>
                        </div>
                    `;
                } else {
                    attributes.forEach(attr => {
                        const field = createAttributeField(attr);
                        container.appendChild(field);
                    });
                }

                container.classList.remove('loading');
                container.classList.add('fade-in');
                
                if (currentManufacturer) {
                    filterAttributesByManufacturer();
                }

                updateProductNames();
                showNotification(`–ó–∞—Ä–µ–¥–µ–Ω–∏ ${attributes.length} –∞—Ç—Ä–∏–±—É—Ç–∞ –∑–∞ ${getProductTypeName(productType)}`);
            }, 300);
        }

        function createAttributeField(attr) {
            const div = document.createElement('div');
            div.className = 'attribute-row';
            div.innerHTML = `
                <span class="attribute-label">${attr.label}${attr.required ? ' *' : ''}:</span>
                ${attr.type === 'select' ? 
                    `<select id="${attr.id}" onchange="updateProductNames()">
                        <option value="">–ò–∑–±–µ—Ä–∏...</option>
                    </select>` :
                    `<input type="${attr.type}" id="${attr.id}" onchange="updateProductNames()" placeholder="–í—ä–≤–µ–¥–∏ ${attr.label.toLowerCase()}">`
                }
                <button type="button" class="add-btn" onclick="openAddValueModal('${attr.id}')" title="–î–æ–±–∞–≤–∏ –Ω–æ–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç">+</button>
            `;
            return div;
        }

        function filterAttributesByManufacturer() {
            const manufacturer = document.getElementById('manufacturer').value;
            currentManufacturer = manufacturer;

            if (!manufacturer || !currentProductType) return;

            const manufacturerValues = attributeValues[manufacturer];
            if (!manufacturerValues) {
                showNotification(`–ù—è–º–∞ –¥–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª ${manufacturer}`, 'warning');
                return;
            }

            Object.keys(manufacturerValues).forEach(attrId => {
                const select = document.getElementById(attrId);
                if (select && select.tagName === 'SELECT') {
                    const currentValue = select.value;
                    select.innerHTML = '<option value="">–ò–∑–±–µ—Ä–∏...</option>';
                    
                    manufacturerValues[attrId].forEach(value => {
                        const option = document.createElement('option');
                        option.value = value.toLowerCase().replace(/\s+/g, '-');
                        option.textContent = value;
                        select.appendChild(option);
                    });

                    if (currentValue) {
                        select.value = currentValue;
                    }
                }
            });

            updateProductNames();
            showNotification(`–§–∏–ª—Ç—Ä–∏—Ä–∞–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∑–∞ ${manufacturer}`);
        }

        function updateProductNames() {
            const nameBg = generateProductName('bg');
            const nameEn = generateProductName('en');
            
            document.getElementById('nameBg').value = nameBg;
            document.getElementById('nameEn').value = nameEn;
        }

        function generateProductName(language) {
            if (!currentProductType || !currentManufacturer) return '';

            const manufacturer = currentManufacturer.charAt(0).toUpperCase() + currentManufacturer.slice(1);
            
            if (currentProductType === 'parquet') {
                const collection = getFieldValue('collection') || '';
                const wood = getFieldValue('wood_type') || '';
                const color = getFieldValue('color') || '';
                const thickness = getFieldValue('thickness') || '';
                const width = getFieldValue('width') || '';
                const length = getFieldValue('length') || '';
                
                const dimensions = thickness && width && length ? `${thickness}x${width}x${length}` : '';
                
                return [manufacturer, collection, wood, color, dimensions]
                    .filter(Boolean).join(' ');
            }
            
            return manufacturer;
        }

        function getFieldValue(fieldId) {
            const field = document.getElementById(fieldId);
            return field ? field.value : '';
        }

        function getProductTypeName(type) {
            const names = {
                'parquet': '–ü–∞—Ä–∫–µ—Ç',
                'doors': '–í—Ä–∞—Ç–∏', 
                'furniture': '–ú–µ–±–µ–ª–∏',
                'wall-coverings': '–°—Ç–µ–Ω–Ω–∏ –æ–±–ª–∏—Ü–æ–≤–∫–∏',
                'wall-decorations': '–î–µ–∫–æ—Ä–∞—Ü–∏–∏ –∑–∞ —Å—Ç–µ–Ω–∞',
                'installation': '–£—Å–ª—É–≥–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂',
                'materials': '–ú–∞—Ç–µ—Ä–∏–∞–ª–∏ –∑–∞ –º–æ–Ω—Ç–∞–∂'
            };
            return names[type] || type;
        }

        function calculatePrices() {
            const costEur = parseFloat(document.getElementById('costEur').value) || 0;
            const markup = parseFloat(document.getElementById('markup').value) || 30;
            const exchangeRate = 1.956;
            
            if (document.getElementById('autoPricing').checked && costEur > 0) {
                const costBgn = costEur * exchangeRate;
                const saleBgn = costBgn * (1 + markup / 100);
                const saleEur = saleBgn / exchangeRate;
                
                document.getElementById('costBgn').value = costBgn.toFixed(2);
                document.getElementById('saleBgn').value = saleBgn.toFixed(2);
                document.getElementById('saleEur').value = saleEur.toFixed(2);
            }
        }

        function toggleAutoPricing() {
            const auto = document.getElementById('autoPricing').checked;
            const fields = ['costBgn', 'saleBgn', 'saleEur'];
            
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                field.readOnly = auto;
                if (auto) {
                    field.classList.add('auto-generated');
                } else {
                    field.classList.remove('auto-generated');
                }
            });
            
            if (auto) {
                calculatePrices();
            }
        }

        function openAddValueModal(attributeId) {
            const attrLabel = document.querySelector(`#${attributeId}`).closest('.attribute-row').querySelector('.attribute-label').textContent;
            const newValue = prompt(`–î–æ–±–∞–≤–∏ –Ω–æ–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –∑–∞ "${attrLabel}":`);
            
            if (newValue && newValue.trim()) {
                const select = document.getElementById(attributeId);
                if (select && select.tagName === 'SELECT') {
                    const option = document.createElement('option');
                    option.value = newValue.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = newValue.trim();
                    option.selected = true;
                    select.appendChild(option);
                    
                    updateProductNames();
                    showNotification(`–î–æ–±–∞–≤–µ–Ω–∞ –Ω–æ–≤–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç: ${newValue}`);
                }
            }
        }

        function saveProduct() {
            const requiredFields = ['productType', 'manufacturer'];
            const missing = requiredFields.filter(fieldId => !document.getElementById(fieldId).value);
            
            if (missing.length > 0) {
                showNotification('–ú–æ–ª—è –ø–æ–ø—ä–ª–Ω–µ—Ç–µ –≤—Å–∏—á–∫–∏ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞', 'error');
                return;
            }
            
            showNotification('–ü—Ä–æ–¥—É–∫—Ç—ä—Ç –µ –∑–∞–ø–∞–∑–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
        }

        function closeModal() {
            if (confirm('–°–∏–≥—É—Ä–Ω–∏ –ª–∏ —Å—Ç–µ, —á–µ –∏—Å–∫–∞—Ç–µ –¥–∞ –∑–∞—Ç–≤–æ—Ä–∏—Ç–µ? –ù–µ—Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏—Ç–µ –ø—Ä–æ–º–µ–Ω–∏ —â–µ –±—ä–¥–∞—Ç –∏–∑–≥—É–±–µ–Ω–∏.')) {
                console.log('Closing modal');
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            ['images', 'documents', 'models3d', 'textures'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('change', function(e) {
                        const files = e.target.files;
                        if (files.length > 0) {
                            showNotification(`–ò–∑–±—Ä–∞–Ω–∏ ${files.length} —Ñ–∞–π–ª–∞ –∑–∞ ${id}`);
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>