# PARKETSENSE - –ú–æ–¥—É–ª –ü–æ—Ä—ä—á–∫–∏

## üìã –û–±—â –ø—Ä–µ–≥–ª–µ–¥

–ú–æ–¥—É–ª—ä—Ç –∑–∞ –ø–æ—Ä—ä—á–∫–∏ –µ —Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∞ —á–∞—Å—Ç –æ—Ç PARKETSENSE ERP —Å–∏—Å—Ç–µ–º–∞—Ç–∞, —É–ø—Ä–∞–≤–ª—è–≤–∞—â–∞ —Ü–µ–ª–∏—è –∂–∏–∑–Ω–µ–Ω —Ü–∏–∫—ä–ª –Ω–∞ –ø–æ—Ä—ä—á–∫–∏—Ç–µ –æ—Ç —Å—ä–∑–¥–∞–≤–∞–Ω–µ –¥–æ –¥–æ—Å—Ç–∞–≤–∫–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (NestJS)
- **OrdersModule** - –æ—Å–Ω–æ–≤–µ–Ω –º–æ–¥—É–ª
- **OrdersController** - API endpoints
- **OrdersService** - –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
- **DTOs** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏

### Frontend (React + TypeScript)
- **OrdersPage** - —Å–ø–∏—Å—ä–∫ —Å –ø–æ—Ä—ä—á–∫–∏
- **OrderDetails** - –¥–µ—Ç–∞–π–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥
- **OrderForm** - —Å—ä–∑–¥–∞–≤–∞–Ω–µ/—Ä–µ–¥–∞–∫—Ü–∏—è
- **OrderStatus** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∏

### Database (PostgreSQL)
- **orders** - –æ—Å–Ω–æ–≤–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞
- **supplier_orders** - –ø–æ—Ä—ä—á–∫–∏ –∫—ä–º –¥–æ—Å—Ç–∞–≤—á–∏—Ü–∏
- **order_payments** - –ø–ª–∞—â–∞–Ω–∏—è
- **order_deliveries** - –¥–æ—Å—Ç–∞–≤–∫–∏
- **order_status_history** - –∏—Å—Ç–æ—Ä–∏—è –Ω–∞ —Å—Ç–∞—Ç—É—Å–∏—Ç–µ

## üîÑ –¢—Ä–∏—Å—Ç–µ–ø–µ–Ω–µ–Ω —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∞

### 1. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–µ–Ω —Å—Ç–∞—Ç—É—Å
- `not_confirmed` - –ù–µ–ø–æ—Ç–≤—ä—Ä–¥–µ–Ω–∞
- `confirmed` - –ü–æ—Ç–≤—ä—Ä–¥–µ–Ω–∞

### 2. –ü–ª–∞—Ç–µ–∂–µ–Ω —Å—Ç–∞—Ç—É—Å
- `not_paid` - –ù–µ–ø–ª–∞—Ç–µ–Ω–∞
- `advance_paid` - –ê–≤–∞–Ω—Å–æ–≤–æ –ø–ª–∞—Ç–µ–Ω–∞
- `fully_paid` - –ù–∞–ø—ä–ª–Ω–æ –ø–ª–∞—Ç–µ–Ω–∞

### 3. –°—Ç–∞—Ç—É—Å –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
- `pending` - –ß–∞–∫–∞—â–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
- `partial` - –ß–∞—Å—Ç–∏—á–Ω–æ –¥–æ—Å—Ç–∞–≤–µ–Ω–∞
- `completed` - –ù–∞–ø—ä–ª–Ω–æ –¥–æ—Å—Ç–∞–≤–µ–Ω–∞

## üìä –ö–ª—é—á–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏
- ‚úÖ –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏ –æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∏
- ‚úÖ –†–µ–¥–∞–∫—Ü–∏—è –Ω–∞ –ø–æ—Ä—ä—á–∫–∏
- ‚úÖ –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ

### –§–∏–Ω–∞–Ω—Å–æ–≤–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Å—É–º–∏
- ‚úÖ –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –ø–ª–∞—â–∞–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø–µ—á–∞–ª–±–∞
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞–≤–∞–Ω—Å–∏

### –î–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ü–ª–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ü—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏ –∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∞

### –ö–æ–º—É–Ω–∏–∫–∞—Ü–∏—è
- ‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏ —Å—ä–æ–±—â–µ–Ω–∏—è
- ‚úÖ –®–∞–±–ª–æ–Ω–∏ –∑–∞ –∏–º–µ–π–ª–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è—Ç–∞

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –í—ä—Ç—Ä–µ—à–Ω–∏ –º–æ–¥—É–ª–∏
- **Clients** - –∫–ª–∏–µ–Ω—Ç—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **Projects** - –ø—Ä–æ–µ–∫—Ç–Ω–∏ –¥–∞–Ω–Ω–∏
- **Variants** - –≤–∞—Ä–∏–∞–Ω—Ç–∏ –Ω–∞ –æ—Ñ–µ—Ä—Ç–∏
- **Products** - –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–∞—Ç–∞–ª–æ–≥

### –í—ä–Ω—à–Ω–∏ —Å–∏—Å—Ç–µ–º–∏
- **Email** - SMTP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **File Storage** - –¥–æ–∫—É–º–µ–Ω—Ç–∏ –∏ —Ñ–∞–π–ª–æ–≤–µ
- **Payment Gateway** - –æ–Ω–ª–∞–π–Ω –ø–ª–∞—â–∞–Ω–∏—è

## üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç–∏

### –ö–ª—é—á–æ–≤–∏ –º–µ—Ç—Ä–∏–∫–∏
- –û–±—â –±—Ä–æ–π –ø–æ—Ä—ä—á–∫–∏
- –ü–æ—Ç–≤—ä—Ä–¥–µ–Ω–∏ –ø–æ—Ä—ä—á–∫–∏
- –ü–ª–∞—Ç–µ–Ω–∏ –ø–æ—Ä—ä—á–∫–∏
- –î–æ—Å—Ç–∞–≤–µ–Ω–∏ –ø–æ—Ä—ä—á–∫–∏

### –§–∏–Ω–∞–Ω—Å–æ–≤–∏ –æ—Ç—á–µ—Ç–∏
- –û–±—â –æ–±–æ—Ä–æ—Ç
- –ü–µ—á–∞–ª–±–∞ –ø–æ –ø–æ—Ä—ä—á–∫–∏
- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–∏ –ø–ª–∞—â–∞–Ω–∏—è
- –ê–Ω–∞–ª–∏–∑ –ø–æ –ø–µ—Ä–∏–æ–¥–∏

## üöÄ API Endpoints

### –û—Å–Ω–æ–≤–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
```
GET    /orders              - –°–ø–∏—Å—ä–∫ —Å –ø–æ—Ä—ä—á–∫–∏
POST   /orders              - –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞
GET    /orders/:id          - –î–µ—Ç–∞–π–ª–∏ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞
PATCH  /orders/:id          - –†–µ–¥–∞–∫—Ü–∏—è –Ω–∞ –ø–æ—Ä—ä—á–∫–∞
DELETE /orders/:id          - –ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –ø–æ—Ä—ä—á–∫–∞
```

### –°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ü–∏–∏
```
PATCH  /orders/:id/status   - –ü—Ä–æ–º—è–Ω–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å
GET    /orders/statistics   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

### –ü–ª–∞—â–∞–Ω–∏—è
```
GET    /orders/:id/payments - –ü–ª–∞—â–∞–Ω–∏—è –ø–æ –ø–æ—Ä—ä—á–∫–∞
POST   /orders/:id/payments - –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –ø–ª–∞—â–∞–Ω–µ
```

### –î–æ—Å—Ç–∞–≤–∫–∏
```
GET    /orders/:id/deliveries - –î–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –ø–æ—Ä—ä—á–∫–∞
POST   /orders/:id/deliveries - –î–æ–±–∞–≤—è–Ω–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Database Schema](./technical/orders-database-schema.sql)
- [Backend API](./technical/orders-backend-api.js)
- [Frontend Components](./technical/orders-frontend-components.js)
- [Email Templates](./technical/orders-routes-email-templates.js)

### –î–∏–∑–∞–π–Ω —Ñ–∞–π–ª–æ–≤–µ
- [Frontend Prototype](./designs/orders-frontend-prototype.html)

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables
```env
# Database
DATABASE_URL=postgresql://...

# Email
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-password

# File Storage
UPLOAD_PATH=/uploads
MAX_FILE_SIZE=10485760
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –ø–æ—Ä—ä—á–∫–∏
```typescript
// Default values
const ORDER_CONFIG = {
  defaultAdvancePercent: 70,
  defaultCurrency: 'BGN',
  autoCalculateProfit: true,
  sendConfirmationEmail: true,
  requireConfirmation: false
};
```

## üß™ –¢–µ—Å—Ç–≤–∞–Ω–µ

### Unit Tests
```bash
# Backend tests
npm run test orders

# Frontend tests
npm run test orders
```

### Integration Tests
```bash
# API tests
npm run test:e2e orders
```

## üì¶ Deployment

### Backend
```bash
# Build
npm run build

# Start
npm run start:prod
```

### Frontend
```bash
# Build
npm run build

# Deploy
npm run deploy
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏–∏

### Database
```bash
# Generate migration
npx prisma migrate dev --name add_orders_module

# Apply migration
npx prisma migrate deploy
```

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ó–∞ –≤—ä–ø—Ä–æ—Å–∏ –∏ –ø—Ä–æ–±–ª–µ–º–∏ —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å –º–æ–¥—É–ª–∞ –∑–∞ –ø–æ—Ä—ä—á–∫–∏:
- **Email**: support@parketsense.com
- **Documentation**: [Wiki](https://wiki.parketsense.com/orders)
- **Issues**: [GitHub Issues](https://github.com/parketsense/erp/issues)

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**: 2024-12-24  
**–ê–≤—Ç–æ—Ä**: PARKETSENSE Development Team 