# PARKETSENSE ERP - Детайлна спецификация на бизнес процесите

## 1. Обща визия и контекст

### Текущо състояние на бизнеса
- **PARKETSENSE** - еволюира от компания за паркет към доставчик на цялостни интериорни решения
- **Продуктова гама**: паркети, мебели, стенни облицовки, стъкла, декорации, врати
- **Услуги**: интериорен дизайн (предстои въвеждане)
- **PARKETSENSE PRO** - фирма за монтажи, използва същата система за офериране
- **Онлайн магазин PRO** (предстои) - B2B/B2C за продукти за монтаж и поддръжка

### Ключови предизвикателства
- Недовършена текуща ERP система
- Множество ръчни процеси и излишни стъпки
- Липса на интеграция с AI
- Липса на project management модул
- Неефективно складово управление
- България влиза в еврозоната от 01.01.2026

## 2. Основен бизнес процес - Офериране

### 2.1 Workflow на офериране
```
1. Посрещане на клиент в шоурум
   ↓
2. Консултация и подбор на продукти
   ↓
3. Записване на контактна информация
   ↓
4. Създаване на клиент в системата
   ↓
5. Създаване на проект (напр. "Къща")
   ↓
6. Създаване на фази (напр. "Етаж 1", "Етаж 2")
   ↓
7. Създаване на варианти във фазата
   ↓
8. Добавяне на стаи във варианта
   ↓
9. Добавяне на продукти в стаите
   ↓
10. Качване на галерия със снимки
    ↓
11. Дефиниране на условия
    ↓
12. Подготовка на email текст
    ↓
13. Preview на офертата
    ↓
14. Изпращане на офертата (JWT токен линк)
```

### 2.2 Структура на данните
```
Клиент
├── Проект (Къща, Апартамент, Офис)
│   ├── Фаза 1 (Етаж 1 / Продажба)
│   │   ├── Вариант 1 (Рибена кост)
│   │   │   ├── Стая 1 (Дневна)
│   │   │   │   ├── Продукт 1 (Паркет)
│   │   │   │   ├── Продукт 2 (Первази)
│   │   │   │   └── Продукт 3 (Лепило)
│   │   │   └── Стая 2 (Спалня)
│   │   └── Вариант 2 (Право редене)
│   └── Фаза 2 (Етаж 2 / Монтаж)
└── Проект 2
```

### 2.3 Специфични функционалности

#### Клиенти
- Физически и юридически лица
- Checkbox "Архитект" с процент комисионна
- Множество лица за контакт по проект
- Настройка кой получава оферти/фактури

#### Варианти
- Дизайнер/Архитект на ниво вариант (проблем: не може на ниво проект)
- Drag & drop подреждане
- Включване/изключване от офертата
- Галерия със снимки
- Клониране между фази

#### Стаи
- Име на стая
- Квадратура (автоматично за всички продукти)
- Обща отстъпка %
- Фира % (добавя се към квадратурата)
- Категории продукти (под, стена, мебели)

#### Продукти
- Търсене и добавяне
- Създаване на нов продукт "на ход"
- Количество (може да override квадратурата)
- Единична цена (с ДДС)
- Отстъпка %
- Крайна цена
- Обща сума

### 2.4 Комуникация с клиента
- Автоматично изпращане на email
- JWT токен за сигурен достъп
- Бутон "Избери" при всеки вариант
- Проблем: клиентите често грешат с избора
- Телефонно потвърждение (manual процес)

## 3. Процес след одобрение на оферта

### 3.1 Фактуриране
1. **Проформа за аванс** (обикновено 70%)
   - Автоматично попълване на данни
   - Възможност за override
   - Автоматично изпращане

2. **При постъпване на плащане**:
   - Бутон "Плати" → генерира:
     - Оригинална фактура (автоматично към клиента)
     - Поръчка в системата
     - Поръчки към производители (автоматично разделяне)

3. **Финална фактура**
   - След доставка
   - Коригирани количества
   - Минус авансово плащане

### 3.2 Управление на поръчки

#### Структура на поръчката
- Номер на поръчка (вътрешен)
- Производител
- Продукти и количества
- Връзка с проект/вариант
- 3 статуса с бутони:
  1. **Информация за поръчка** (червено → зелено)
  2. **Плащане** (червено → жълто → зелено)
  3. **Доставка** (червено → синьо → зелено)

#### Workflow на поръчка
1. **Потвърждение**:
   - Сравнение с документа от производителя
   - Корекции в количества/цени
   - Въвеждане на номер от производителя
   - Очаквана дата на доставка
   - Прикачане на файлове
   - Автоматично потвърждение към производителя

2. **Плащане**:
   - Частични плащания (обикновено не 100%)
   - Прикачане на SWIFT
   - Автоматично намаляване на дължимата сума
   - Статус: червено → жълто (частично) → зелено (пълно)

3. **Доставка**:
   - Информация за транспорт
   - Реално доставени количества
   - Нотификация за пристигане
   - Тригер за финално фактуриране

### 3.3 Проблеми в текущата система
- Статусите не се обновяват правилно в общия списък
- Не може да се кликне директно върху фактура
- Липсва кредитно известие
- Няма оперативно счетоводство

## 4. Интеграция с PARKETSENSE PRO

### Особености
- Използва същия процес на офериране
- Продуктите се водят като "услуги"
- Без отстъпки (не се визуализира полето)
- Проблем: объркващо представяне (Вариант 1: Паркет, Вариант 2: Монтаж)
- Решение: преместване в отделна фаза "Монтаж"

### Необходими подобрения
- Project management модул
- График на майстори
- Следене на машини
- Интеграция с MagicPlan (API)

## 5. Модул Склад

### Текущо състояние
- 3 основни операции:
  1. Завеждане на доставка
  2. Изписване към обект
  3. Връщане от обект

### Проблеми
- Липсва начална инвентаризация
- Няма баркод система
- Не се следи срок на годност правилно
- Първобитен начин на въвеждане

### Необходими функции
- Маркиране на стока
- Баркод четец
- Следене на машини
- По-интуитивен интерфейс

## 6. Управление на продукти

### Структура на продукт
- 10+ параметъра
- Зависимости (производител → колекции)
- 4 ценови полета (BGN/EUR, доставна/продажна)
- Автоматично изчисление на цени
- Име на български и английски
- Клониране на продукти

### Проблеми
- Неудобно въвеждане на "инвентари"
- Името не остава динамично след първоначално генериране
- Сложни зависимости

## 7. Визия за бъдещето

### AI Интеграции
- **Офериране**: Автоматични предложения, оптимални цени
- **Клиенти**: Персонализирани препоръки, churn prediction
- **Склад**: Demand forecasting, автоматично поръчване
- **Чатбот**: Обучен с целия бизнес knowledge
- **Интериорен дизайн**: AI-базирани предложения

### Екосистема
```
┌─────────────────────┐
│   PARKETSENSE.bg    │ ← Корпоративен сайт + AI въпросник
└──────────┬──────────┘
           │
┌──────────┴──────────┐
│    ERP СИСТЕМА      │ ← Централна система
└──────────┬──────────┘
           │
┌──────────┴──────────┐
│  PRO ОНЛАЙН МАГАЗИН │ ← B2B/B2C за монтажни материали
└─────────────────────┘
```

### Ключови цели
1. Максимална автоматизация
2. Улеснено създаване на оферти
3. Интерактивност за клиентите
4. Дълбока AI интеграция
5. "WOW" ефект при всеки контакт
6. Ефективност без увеличаване на екипа

### Технически изисквания
- Поддръжка на BGN и EUR
- Responsive design
- API интеграции
- Scalable архитектура
- Сигурност (JWT токени)

## 8. Приоритети за разработка

### Фаза 1 - Core модули
1. Клиенти (подобрен CRM)
2. Продукти (опростено управление)
3. Оферти (оптимизиран процес)

### Фаза 2 - Операции
1. Поръчки (коригирани статуси)
2. Фактури (пълна функционалност)
3. Комуникация (история и tracking)

### Фаза 3 - Разширения
1. Project Management
2. Склад (модерен подход)
3. AI асистенти

### Фаза 4 - Екосистема
1. Интериорен дизайн модул
2. PRO онлайн магазин
3. Пълна AI интеграция
4. API екосистема

## 9. Критични подобрения

### Незабавни
- Дизайнер на ниво проект (не само вариант)
- Правилно обновяване на статуси
- Директен достъп до документи
- Кредитни известия

### Краткосрочни
- Динамични имена на продукти
- По-лесно клониране между фази
- Баркод система
- Project management база

### Дългосрочни
- Пълна AI интеграция
- MagicPlan API
- Предиктивни анализи
- Автоматизирани workflows